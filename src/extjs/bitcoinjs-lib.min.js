if(typeof window=="undefined"){window=global;window.navigator={}}window.Bitcoin={};if(typeof Crypto=="undefined"||!Crypto.util){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var e=window.Crypto={};var r=e.util={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number){return r.rotl(t,8)&16711935|r.rotl(t,24)&4278255360}for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(Math.random()*256));return e},bytesToWords:function(t){for(var e=[],r=0,i=0;r<t.length;r++,i+=8)e[i>>>5]|=(t[r]&255)<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<t.length*32;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++){e.push((t[r]>>>4).toString(16));e.push((t[r]&15).toString(16))}return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(e){for(var r=[],i=0;i<e.length;i+=3){var n=e[i]<<16|e[i+1]<<8|e[i+2];for(var o=0;o<4;o++){if(i*8+o*6<=e.length*8)r.push(t.charAt(n>>>6*(3-o)&63));else r.push("=")}}return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],i=0,n=0;i<e.length;n=++i%4){if(n==0)continue;r.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<n*2|t.indexOf(e.charAt(i))>>>6-n*2)}return r}};var i=e.charenc={};var n=i.UTF8={stringToBytes:function(t){return o.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(o.bytesToString(t)))}};var o=i.Binary={stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r)&255);return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}})()}(function(){var t=Crypto.util;t.u32=function(t){return t>>>0};t.add=function(){var t=this.u32(arguments[0]);for(var e=1;e<arguments.length;e++)t=this.u32(t+this.u32(arguments[e]));return t};t.mult=function(t,e){return this.add((e&4294901760)*t,(e&65535)*t)};t.gt=function(t,e){return this.u32(t)>this.u32(e)};t.lt=function(t,e){return this.u32(t)<this.u32(e)}})();(function(t){var e=t.pad={};function r(t,e){var r=t._blocksize*4;var i=r-e.length%r;return i}var i=function(t,e,r,i){var n=e.pop();if(n==0){throw new Error("Invalid zero-length padding specified for "+r+". Wrong cipher specification or key used?")}var o=t._blocksize*4;if(n>o){throw new Error("Invalid padding length of "+n+" specified for "+r+". Wrong cipher specification or key used?")}for(var s=1;s<n;s++){var a=e.pop();if(i!=undefined&&i!=a){throw new Error("Invalid padding byte of 0x"+a.toString(16)+" specified for "+r+". Wrong cipher specification or key used?")}}};e.NoPadding={pad:function(t,e){},unpad:function(t,e){}};e.ZeroPadding={pad:function(t,e){var r=t._blocksize*4;var i=e.length%r;if(i!=0){for(i=r-i;i>0;i--){e.push(0)}}},unpad:function(t,e){while(e[e.length-1]==0){e.pop()}}};e.iso7816={pad:function(t,e){var i=r(t,e);e.push(128);for(;i>1;i--){e.push(0)}},unpad:function(t,e){var r;for(r=t._blocksize*4;r>0;r--){var i=e.pop();if(i==128)return;if(i!=0){throw new Error("ISO-7816 padding byte must be 0, not 0x"+i.toString(16)+". Wrong cipher specification or key used?")}}throw new Error("ISO-7816 padded beyond cipher block size. Wrong cipher specification or key used?")}};e.ansix923={pad:function(t,e){var i=r(t,e);for(var n=1;n<i;n++){e.push(0)}e.push(i)},unpad:function(t,e){i(t,e,"ANSI X.923",0)}};e.iso10126={pad:function(t,e){var i=r(t,e);for(var n=1;n<i;n++){e.push(Math.floor(Math.random()*256))}e.push(i)},unpad:function(t,e){i(t,e,"ISO 10126",undefined)}};e.pkcs7={pad:function(t,e){var i=r(t,e);for(var n=0;n<i;n++){e.push(i)}},unpad:function(t,e){i(t,e,"PKCS 7",e[e.length-1])}};var n=t.mode={};var o=n.Mode=function(t){if(t){this._padding=t}};o.prototype={encrypt:function(t,e,r){this._padding.pad(t,e);this._doEncrypt(t,e,r)},decrypt:function(t,e,r){this._doDecrypt(t,e,r);this._padding.unpad(t,e)},_padding:e.iso7816};var s=n.ECB=function(){o.apply(this,arguments)};var a=s.prototype=new o;a._doEncrypt=function(t,e,r){var i=t._blocksize*4;for(var n=0;n<e.length;n+=i){t._encryptblock(e,n)}};a._doDecrypt=function(t,e,r){var i=t._blocksize*4;for(var n=0;n<e.length;n+=i){t._decryptblock(e,n)}};a.fixOptions=function(t){t.iv=[]};var u=n.CBC=function(){o.apply(this,arguments)};var h=u.prototype=new o;h._doEncrypt=function(t,e,r){var i=t._blocksize*4;for(var n=0;n<e.length;n+=i){if(n==0){for(var o=0;o<i;o++)e[o]^=r[o]}else{for(var o=0;o<i;o++)e[n+o]^=e[n+o-i]}t._encryptblock(e,n)}};h._doDecrypt=function(t,e,r){var i=t._blocksize*4;var n=r;for(var o=0;o<e.length;o+=i){var s=e.slice(o,o+i);t._decryptblock(e,o);for(var a=0;a<i;a++){e[o+a]^=n[a]}n=s}};var p=n.CFB=function(){o.apply(this,arguments)};var c=p.prototype=new o;c._padding=e.NoPadding;c._doEncrypt=function(t,e,r){var i=t._blocksize*4,n=r.slice(0);for(var o=0;o<e.length;o++){var s=o%i;if(s==0)t._encryptblock(n,0);e[o]^=n[s];n[s]=e[o]}};c._doDecrypt=function(t,e,r){var i=t._blocksize*4,n=r.slice(0);for(var o=0;o<e.length;o++){var s=o%i;if(s==0)t._encryptblock(n,0);var a=e[o];e[o]^=n[s];n[s]=a}};var f=n.OFB=function(){o.apply(this,arguments)};var l=f.prototype=new o;l._padding=e.NoPadding;l._doEncrypt=function(t,e,r){var i=t._blocksize*4,n=r.slice(0);for(var o=0;o<e.length;o++){if(o%i==0)t._encryptblock(n,0);e[o]^=n[o%i]}};l._doDecrypt=l._doEncrypt;var v=n.CTR=function(){o.apply(this,arguments)};var g=v.prototype=new o;g._padding=e.NoPadding;g._doEncrypt=function(t,e,r){var i=t._blocksize*4;var n=r.slice(0);for(var o=0;o<e.length;){var s=n.slice(0);t._encryptblock(s,0);for(var a=0;o<e.length&&a<i;a++,o++){e[o]^=s[a]}if(++n[i-1]==256){n[i-1]=0;if(++n[i-2]==256){n[i-2]=0;if(++n[i-3]==256){n[i-3]=0;++n[i-4]}}}}};g._doDecrypt=g._doEncrypt})(Crypto);(function(){var t=Crypto,e=t.util,r=t.charenc,i=r.UTF8,n=r.Binary;var o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var s=t.SHA256=function(t,r){var i=e.wordsToBytes(s._sha256(t));return r&&r.asBytes?i:r&&r.asString?n.bytesToString(i):e.bytesToHex(i)};s._sha256=function(t){if(t.constructor==String)t=i.stringToBytes(t);var r=e.bytesToWords(t),n=t.length*8,s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a=[],u,h,p,c,f,l,v,g,d,y,F,B;r[n>>5]|=128<<24-n%32;r[(n+64>>9<<4)+15]=n;for(var d=0;d<r.length;d+=16){u=s[0];h=s[1];p=s[2];c=s[3];f=s[4];l=s[5];v=s[6];g=s[7];for(var y=0;y<64;y++){if(y<16)a[y]=r[y+d];else{var m=a[y-15],b=a[y-2],w=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,I=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;a[y]=w+(a[y-7]>>>0)+I+(a[y-16]>>>0)}var E=f&l^~f&v,T=u&h^u&p^h&p,C=(u<<30|u>>>2)^(u<<19|u>>>13)^(u<<10|u>>>22),P=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25);F=(g>>>0)+P+E+o[y]+(a[y]>>>0);B=C+T;g=v;v=l;l=f;f=c+F>>>0;c=p;p=h;h=u;u=F+B>>>0}s[0]+=u;s[1]+=h;s[2]+=p;s[3]+=c;s[4]+=f;s[5]+=l;s[6]+=v;s[7]+=g}return s};s._blocksize=16;s._digestsize=32})();(function(){var t=Crypto,e=t.util,r=t.charenc,i=r.UTF8;var n=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];for(var o=[],s=0;s<256;s++)o[n[s]]=s;var a=[],u=[],h=[],p=[],c=[],f=[];function l(t,e){for(var r=0,i=0;i<8;i++){if(e&1)r^=t;var n=t&128;t=t<<1&255;if(n)t^=27;e>>>=1}return r}for(var s=0;s<256;s++){a[s]=l(s,2);u[s]=l(s,3);h[s]=l(s,9);p[s]=l(s,11);c[s]=l(s,13);f[s]=l(s,14)}var v=[0,1,2,4,8,16,32,64,128,27,54];var g=[[],[],[],[]],d,y,F;var B=t.AES={encrypt:function(r,n,o){o=o||{};var s=o.mode||new t.mode.OFB;if(s.fixOptions)s.fixOptions(o);var a=r.constructor==String?i.stringToBytes(r):r,u=o.iv||e.randomBytes(B._blocksize*4),h=n.constructor==String?t.PBKDF2(n,u,32,{asBytes:true}):n;B._init(h);s.encrypt(B,a,u);a=o.iv?a:u.concat(a);return o&&o.asBytes?a:e.bytesToBase64(a)},decrypt:function(r,n,o){o=o||{};var s=o.mode||new t.mode.OFB;if(s.fixOptions)s.fixOptions(o);var a=r.constructor==String?e.base64ToBytes(r):r,u=o.iv||a.splice(0,B._blocksize*4),h=n.constructor==String?t.PBKDF2(n,u,32,{asBytes:true}):n;B._init(h);s.decrypt(B,a,u);return o&&o.asBytes?a:i.bytesToString(a)},_blocksize:4,_encryptblock:function(t,e){for(var r=0;r<B._blocksize;r++){for(var i=0;i<4;i++)g[r][i]=t[e+i*4+r]}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[i][r]}for(var o=1;o<y;o++){for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]=n[g[r][i]]}g[1].push(g[1].shift());g[2].push(g[2].shift());g[2].push(g[2].shift());g[3].unshift(g[3].pop());for(var i=0;i<4;i++){var s=g[0][i],h=g[1][i],p=g[2][i],c=g[3][i];g[0][i]=a[s]^u[h]^p^c;g[1][i]=s^a[h]^u[p]^c;g[2][i]=s^h^a[p]^u[c];g[3][i]=u[s]^h^p^a[c]}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[o*4+i][r]}}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]=n[g[r][i]]}g[1].push(g[1].shift());g[2].push(g[2].shift());g[2].push(g[2].shift());g[3].unshift(g[3].pop());for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[y*4+i][r]}for(var r=0;r<B._blocksize;r++){for(var i=0;i<4;i++)t[e+i*4+r]=g[r][i]}},_decryptblock:function(t,e){for(var r=0;r<B._blocksize;r++){for(var i=0;i<4;i++)g[r][i]=t[e+i*4+r]}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[y*4+i][r]}for(var n=1;n<y;n++){g[1].unshift(g[1].pop());g[2].push(g[2].shift());g[2].push(g[2].shift());g[3].push(g[3].shift());for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]=o[g[r][i]]}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[(y-n)*4+i][r]}for(var i=0;i<4;i++){var s=g[0][i],a=g[1][i],u=g[2][i],l=g[3][i];g[0][i]=f[s]^p[a]^c[u]^h[l];g[1][i]=h[s]^f[a]^p[u]^c[l];g[2][i]=c[s]^h[a]^f[u]^p[l];g[3][i]=p[s]^c[a]^h[u]^f[l]}}g[1].unshift(g[1].pop());g[2].push(g[2].shift());g[2].push(g[2].shift());g[3].push(g[3].shift());for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]=o[g[r][i]]}for(var r=0;r<4;r++){for(var i=0;i<4;i++)g[r][i]^=F[i][r]}for(var r=0;r<B._blocksize;r++){for(var i=0;i<4;i++)t[e+i*4+r]=g[r][i]}},_init:function(t){d=t.length/4;y=d+6;B._keyexpansion(t)},_keyexpansion:function(t){F=[];for(var e=0;e<d;e++){F[e]=[t[e*4],t[e*4+1],t[e*4+2],t[e*4+3]]}for(var e=d;e<B._blocksize*(y+1);e++){var r=[F[e-1][0],F[e-1][1],F[e-1][2],F[e-1][3]];if(e%d==0){r.push(r.shift());r[0]=n[r[0]];r[1]=n[r[1]];r[2]=n[r[2]];r[3]=n[r[3]];r[0]^=v[e/d]}else if(d>6&&e%d==4){r[0]=n[r[0]];r[1]=n[r[1]];r[2]=n[r[2]];r[3]=n[r[3]]}F[e]=[F[e-d][0]^r[0],F[e-d][1]^r[1],F[e-d][2]^r[2],F[e-d][3]^r[3]]}}}})();(function(){var t=Crypto,e=t.util,r=t.charenc,i=r.UTF8,n=r.Binary;t.PBKDF2=function(r,o,s,a){if(r.constructor==String)r=i.stringToBytes(r);if(o.constructor==String)o=i.stringToBytes(o);var u=a&&a.hasher||t.SHA1,h=a&&a.iterations||1;function p(e,r){return t.HMAC(u,r,e,{asBytes:true})}var c=[],f=1;while(c.length<s){var l=p(r,o.concat(e.wordsToBytes([f])));for(var v=l,g=1;g<h;g++){v=p(r,v);for(var d=0;d<l.length;d++)l[d]^=v[d]}c=c.concat(l);f++}c.length=s;return a&&a.asBytes?c:a&&a.asString?n.bytesToString(c):e.bytesToHex(c)}})();(function(){var t=Crypto,e=t.util,r=t.charenc,i=r.UTF8,n=r.Binary;t.HMAC=function(t,r,o,s){if(r.constructor==String)r=i.stringToBytes(r);if(o.constructor==String)o=i.stringToBytes(o);if(o.length>t._blocksize*4)o=t(o,{asBytes:true});var a=o.slice(0),u=o.slice(0);for(var h=0;h<t._blocksize*4;h++){a[h]^=92;u[h]^=54}var p=t(a.concat(t(u.concat(r),{asBytes:true})),{asBytes:true});return s&&s.asBytes?p:s&&s.asString?n.bytesToString(p):e.bytesToHex(p)}})();(function(){function t(t){throw t}var e=null;function r(t,e){this.a=t;this.b=e}function i(t,e){var r=[],i=(1<<e)-1,n=t.length*e,o;for(o=0;o<n;o+=e)r[o>>>5]|=(t.charCodeAt(o/e)&i)<<32-e-o%32;return{value:r,binLen:n}}function n(e){var r=[],i=e.length,n,o;0!==i%2&&t("String of HEX type must be in byte increments");for(n=0;n<i;n+=2)o=parseInt(e.substr(n,2),16),isNaN(o)&&t("String of HEX type contains invalid characters"),r[n>>>3]|=o<<24-4*(n%8);return{value:r,binLen:4*i}}function o(e){var r=[],i=0,n,o,s,a,u;-1===e.search(/^[a-zA-Z0-9=+\/]+$/)&&t("Invalid character in base-64 string");n=e.indexOf("=");e=e.replace(/\=/g,"");-1!==n&&n<e.length&&t("Invalid '=' found in base-64 string");for(o=0;o<e.length;o+=4){u=e.substr(o,4);for(s=a=0;s<u.length;s+=1)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u[s]),a|=n<<18-6*s;for(s=0;s<u.length-1;s+=1)r[i>>2]|=(a>>>16-8*s&255)<<24-8*(i%4),i+=1}return{value:r,binLen:8*i}}function s(t,e){var r="",i=4*t.length,n,o;for(n=0;n<i;n+=1)o=t[n>>>2]>>>8*(3-n%4),r+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(o&15);return e.outputUpper?r.toUpperCase():r}function a(t,e){var r="",i=4*t.length,n,o,s;for(n=0;n<i;n+=3){s=(t[n>>>2]>>>8*(3-n%4)&255)<<16|(t[n+1>>>2]>>>8*(3-(n+1)%4)&255)<<8|t[n+2>>>2]>>>8*(3-(n+2)%4)&255;for(o=0;4>o;o+=1)r=8*n+6*o<=32*t.length?r+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-o)&63):r+e.b64Pad}return r}function u(e){var r={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(r.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(r.b64Pad=e.b64Pad)}catch(i){}"boolean"!==typeof r.outputUpper&&t("Invalid outputUpper formatting option");"string"!==typeof r.b64Pad&&t("Invalid b64Pad formatting option");return r}function h(t,i){var n=e,n=new r(t.a,t.b);return n=32>=i?new r(n.a>>>i|n.b<<32-i&4294967295,n.b>>>i|n.a<<32-i&4294967295):new r(n.b>>>i-32|n.a<<64-i&4294967295,n.a>>>i-32|n.b<<64-i&4294967295)}function p(t,i){var n=e;return n=32>=i?new r(t.a>>>i,t.b>>>i|t.a<<32-i&4294967295):new r(0,t.a>>>i-32)}function c(t,e,i){return new r(t.a&e.a^~t.a&i.a,t.b&e.b^~t.b&i.b)}function f(t,e,i){return new r(t.a&e.a^t.a&i.a^e.a&i.a,t.b&e.b^t.b&i.b^e.b&i.b)}function l(t){var e=h(t,28),i=h(t,34);t=h(t,39);return new r(e.a^i.a^t.a,e.b^i.b^t.b)}function v(t){var e=h(t,14),i=h(t,18);t=h(t,41);return new r(e.a^i.a^t.a,e.b^i.b^t.b)}function g(t){var e=h(t,1),i=h(t,8);t=p(t,7);return new r(e.a^i.a^t.a,e.b^i.b^t.b)}function d(t){var e=h(t,19),i=h(t,61);t=p(t,6);return new r(e.a^i.a^t.a,e.b^i.b^t.b)}function y(t,e){var i,n,o;i=(t.b&65535)+(e.b&65535);n=(t.b>>>16)+(e.b>>>16)+(i>>>16);o=(n&65535)<<16|i&65535;i=(t.a&65535)+(e.a&65535)+(n>>>16);n=(t.a>>>16)+(e.a>>>16)+(i>>>16);return new r((n&65535)<<16|i&65535,o)}function F(t,e,i,n){var o,s,a;o=(t.b&65535)+(e.b&65535)+(i.b&65535)+(n.b&65535);s=(t.b>>>16)+(e.b>>>16)+(i.b>>>16)+(n.b>>>16)+(o>>>16);a=(s&65535)<<16|o&65535;o=(t.a&65535)+(e.a&65535)+(i.a&65535)+(n.a&65535)+(s>>>16);s=(t.a>>>16)+(e.a>>>16)+(i.a>>>16)+(n.a>>>16)+(o>>>16);return new r((s&65535)<<16|o&65535,a)}function B(t,e,i,n,o){var s,a,u;s=(t.b&65535)+(e.b&65535)+(i.b&65535)+(n.b&65535)+(o.b&65535);a=(t.b>>>16)+(e.b>>>16)+(i.b>>>16)+(n.b>>>16)+(o.b>>>16)+(s>>>16);u=(a&65535)<<16|s&65535;s=(t.a&65535)+(e.a&65535)+(i.a&65535)+(n.a&65535)+(o.a&65535)+(a>>>16);a=(t.a>>>16)+(e.a>>>16)+(i.a>>>16)+(n.a>>>16)+(o.a>>>16)+(s>>>16);return new r((a&65535)<<16|s&65535,u)}function m(e,i,n){var o,s,a,u,h,p,m,b,w,I,E,T,C,P,_,A,S,O,x,D,k,H,R,U,N,M,q=[],L,K;"SHA-384"===n||"SHA-512"===n?(E=80,o=(i+128>>>10<<5)+31,P=32,_=2,N=r,A=y,S=F,O=B,x=g,D=d,k=l,H=v,U=f,R=c,M=[new N(1116352408,3609767458),new N(1899447441,602891725),new N(3049323471,3964484399),new N(3921009573,2173295548),new N(961987163,4081628472),new N(1508970993,3053834265),new N(2453635748,2937671579),new N(2870763221,3664609560),new N(3624381080,2734883394),new N(310598401,1164996542),new N(607225278,1323610764),new N(1426881987,3590304994),new N(1925078388,4068182383),new N(2162078206,991336113),new N(2614888103,633803317),new N(3248222580,3479774868),new N(3835390401,2666613458),new N(4022224774,944711139),new N(264347078,2341262773),new N(604807628,2007800933),new N(770255983,1495990901),new N(1249150122,1856431235),new N(1555081692,3175218132),new N(1996064986,2198950837),new N(2554220882,3999719339),new N(2821834349,766784016),new N(2952996808,2566594879),new N(3210313671,3203337956),new N(3336571891,1034457026),new N(3584528711,2466948901),new N(113926993,3758326383),new N(338241895,168717936),new N(666307205,1188179964),new N(773529912,1546045734),new N(1294757372,1522805485),new N(1396182291,2643833823),new N(1695183700,2343527390),new N(1986661051,1014477480),new N(2177026350,1206759142),new N(2456956037,344077627),new N(2730485921,1290863460),new N(2820302411,3158454273),new N(3259730800,3505952657),new N(3345764771,106217008),new N(3516065817,3606008344),new N(3600352804,1432725776),new N(4094571909,1467031594),new N(275423344,851169720),new N(430227734,3100823752),new N(506948616,1363258195),new N(659060556,3750685593),new N(883997877,3785050280),new N(958139571,3318307427),new N(1322822218,3812723403),new N(1537002063,2003034995),new N(1747873779,3602036899),new N(1955562222,1575990012),new N(2024104815,1125592928),new N(2227730452,2716904306),new N(2361852424,442776044),new N(2428436474,593698344),new N(2756734187,3733110249),new N(3204031479,2999351573),new N(3329325298,3815920427),new N(3391569614,3928383900),new N(3515267271,566280711),new N(3940187606,3454069534),new N(4118630271,4000239992),new N(116418474,1914138554),new N(174292421,2731055270),new N(289380356,3203993006),new N(460393269,320620315),new N(685471733,587496836),new N(852142971,1086792851),new N(1017036298,365543100),new N(1126000580,2618297676),new N(1288033470,3409855158),new N(1501505948,4234509866),new N(1607167915,987167468),new N(1816402316,1246189591)],I="SHA-384"===n?[new N(3418070365,3238371032),new N(1654270250,914150663),new N(2438529370,812702999),new N(355462360,4144912697),new N(1731405415,4290775857),new N(41048885895,1750603025),new N(3675008525,1694076839),new N(1203062813,3204075428)]:[new N(1779033703,4089235720),new N(3144134277,2227873595),new N(1013904242,4271175723),new N(2773480762,1595750129),new N(1359893119,2917565137),new N(2600822924,725511199),new N(528734635,4215389547),new N(1541459225,327033209)]):t("Unexpected error in SHA-2 implementation");e[i>>>5]|=128<<24-i%32;e[o]=i;L=e.length;for(T=0;T<L;T+=P){i=I[0];o=I[1];s=I[2];a=I[3];u=I[4];h=I[5];p=I[6];m=I[7];for(C=0;C<E;C+=1)q[C]=16>C?new N(e[C*_+T],e[C*_+T+1]):S(D(q[C-2]),q[C-7],x(q[C-15]),q[C-16]),b=O(m,H(u),R(u,h,p),M[C],q[C]),w=A(k(i),U(i,o,s)),m=p,p=h,h=u,u=A(a,b),a=s,s=o,o=i,i=A(b,w);I[0]=A(i,I[0]);I[1]=A(o,I[1]);I[2]=A(s,I[2]);I[3]=A(a,I[3]);I[4]=A(u,I[4]);I[5]=A(h,I[5]);I[6]=A(p,I[6]);I[7]=A(m,I[7])}"SHA-384"===n?K=[I[0].a,I[0].b,I[1].a,I[1].b,I[2].a,I[2].b,I[3].a,I[3].b,I[4].a,I[4].b,I[5].a,I[5].b]:"SHA-512"===n?K=[I[0].a,I[0].b,I[1].a,I[1].b,I[2].a,I[2].b,I[3].a,I[3].b,I[4].a,I[4].b,I[5].a,I[5].b,I[6].a,I[6].b,I[7].a,I[7].b]:t("Unexpected error in SHA-2 implementation");return K}window.jsSHA=function(r,h,p){var c=e,f=e,l=0,v=[0],g=0,d=e,g="undefined"!==typeof p?p:8;8===g||16===g||t("charSize must be 8 or 16");"HEX"===h?(0!==r.length%2&&t("srcString of HEX type must be in byte increments"),d=n(r),l=d.binLen,v=d.value):"ASCII"===h||"TEXT"===h?(d=i(r,g),l=d.binLen,v=d.value):"B64"===h?(d=o(r),l=d.binLen,v=d.value):t("inputFormat must be HEX, TEXT, ASCII, or B64");this.getHash=function(r,i,n){var o=e,h=v.slice(),p="";switch(i){case"HEX":o=s;break;case"B64":o=a;break;default:t("format must be HEX or B64")}"SHA-384"===r?(e===c&&(c=m(h,l,r)),p=o(c,u(n))):"SHA-512"===r?(e===f&&(f=m(h,l,r)),p=o(f,u(n))):t("Chosen SHA variant is not supported");return p};this.getHMAC=function(r,h,p,c,f){var d,y,F,B,b,w=[],I=[],E=e;switch(c){case"HEX":d=s;break;case"B64":d=a;break;default:t("outputFormat must be HEX or B64")}"SHA-384"===p?(F=128,b=384):"SHA-512"===p?(F=128,b=512):t("Chosen SHA variant is not supported");"HEX"===h?(E=n(r),B=E.binLen,y=E.value):"ASCII"===h||"TEXT"===h?(E=i(r,g),B=E.binLen,y=E.value):"B64"===h?(E=o(r),B=E.binLen,y=E.value):t("inputFormat must be HEX, TEXT, ASCII, or B64");r=8*F;h=F/4-1;F<B/8?(y=m(y,B,p),y[h]&=4294967040):F>B/8&&(y[h]&=4294967040);for(F=0;F<=h;F+=1)w[F]=y[F]^909522486,I[F]=y[F]^1549556828;p=m(I.concat(m(w.concat(v),r+l,p)),r+b,p);return d(p,u(f))}}})();(function(){var t=Crypto,e=t.util,r=t.charenc,i=r.UTF8,n=r.Binary;e.bytesToLWords=function(t){var e=Array(t.length>>2);for(var r=0;r<e.length;r++)e[r]=0;for(var r=0;r<t.length*8;r+=8)e[r>>5]|=(t[r/8]&255)<<r%32;return e};e.lWordsToBytes=function(t){var e=[];for(var r=0;r<t.length*32;r+=8)e.push(t[r>>5]>>>r%32&255);return e};var o=t.RIPEMD160=function(t,r){var i=e.lWordsToBytes(o._rmd160(t));return r&&r.asBytes?i:r&&r.asString?n.bytesToString(i):e.bytesToHex(i)};o._rmd160=function(t){if(t.constructor==String)t=i.stringToBytes(t);var r=e.bytesToLWords(t),n=t.length*8;r[n>>5]|=128<<n%32;r[(n+64>>>9<<4)+14]=n;var o=1732584193;var g=4023233417;var d=2562383102;var y=271733878;var F=3285377520;for(var B=0;B<r.length;B+=16){var m;var b=o,w=g,I=d,E=y,T=F;var C=o,P=g,_=d,A=y,S=F;for(var O=0;O<=79;++O){m=l(b,s(O,w,I,E));m=l(m,r[B+h[O]]);m=l(m,a(O));m=l(v(m,c[O]),T);b=T;T=E;E=v(I,10);I=w;w=m;m=l(C,s(79-O,P,_,A));m=l(m,r[B+p[O]]);m=l(m,u(O));m=l(v(m,f[O]),S);C=S;S=A;A=v(_,10);_=P;P=m}m=l(g,l(I,A));g=l(d,l(E,S));d=l(y,l(T,C));y=l(F,l(b,P));F=l(o,l(w,_));o=m}return[o,g,d,y,F]};function s(t,e,r,i){return 0<=t&&t<=15?e^r^i:16<=t&&t<=31?e&r|~e&i:32<=t&&t<=47?(e|~r)^i:48<=t&&t<=63?e&i|r&~i:64<=t&&t<=79?e^(r|~i):"rmd160_f: j out of range"}function a(t){return 0<=t&&t<=15?0:16<=t&&t<=31?1518500249:32<=t&&t<=47?1859775393:48<=t&&t<=63?2400959708:64<=t&&t<=79?2840853838:"rmd160_K1: j out of range"}function u(t){return 0<=t&&t<=15?1352829926:16<=t&&t<=31?1548603684:32<=t&&t<=47?1836072691:48<=t&&t<=63?2053994217:64<=t&&t<=79?0:"rmd160_K2: j out of range"}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function l(t,e){var r=(t&65535)+(e&65535);var i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function v(t,e){return t<<e|t>>>32-e}})();var MAX_VALUE=2147483647;Bitcoin.scrypt=function(t,e,r,i,n,o){if(r==0||(r&r-1)!=0)throw Error("N must be > 0 and a power of 2");if(r>MAX_VALUE/128/i)throw Error("Parameter N is too large");if(i>MAX_VALUE/128/n)throw Error("Parameter r is too large");var s={iterations:1,hasher:Crypto.SHA256,asBytes:true};var a=[];var u=[];var h=[];var p=[];var c;var u=Crypto.PBKDF2(t,e,n*128*i,s);for(c=0;c<n;c++){smix(u,c*128*i,i,r,p,h)}a=Crypto.PBKDF2(t,u,o,s);return a};function smix(t,e,r,i,n,o){var s=0;var a=128*r;var u;arraycopy32(t,e,o,s,a);for(u=0;u<i;u++){arraycopy32(o,s,n,u*a,a);blockmix_salsa8(o,s,a,r)}for(u=0;u<i;u++){var h=integerify(o,s,r)&i-1;blockxor(n,h*a,o,s,a);blockmix_salsa8(o,s,a,r)}arraycopy32(o,s,t,e,a)}function blockmix_salsa8(t,e,r,i){var n=[];var o;arraycopy32(t,e+(2*i-1)*64,n,0,64);for(o=0;o<2*i;o++){blockxor(t,o*64,n,0,64);salsa20_8(n);arraycopy32(n,0,t,r+o*64,64)}for(o=0;o<i;o++){arraycopy32(t,r+o*2*64,t,e+o*64,64)}for(o=0;o<i;o++){arraycopy32(t,r+(o*2+1)*64,t,e+(o+i)*64,64)}}function R(t,e){return t<<e|t>>>32-e}function salsa20_8(t){var e=new Array(32);var r=new Array(32);var i;for(i=0;i<16;i++){e[i]=(t[i*4+0]&255)<<0;e[i]|=(t[i*4+1]&255)<<8;e[i]|=(t[i*4+2]&255)<<16;e[i]|=(t[i*4+3]&255)<<24}arraycopy(e,0,r,0,16);for(i=8;i>0;i-=2){r[4]^=R(r[0]+r[12],7);r[8]^=R(r[4]+r[0],9);r[12]^=R(r[8]+r[4],13);r[0]^=R(r[12]+r[8],18);r[9]^=R(r[5]+r[1],7);r[13]^=R(r[9]+r[5],9);r[1]^=R(r[13]+r[9],13);r[5]^=R(r[1]+r[13],18);r[14]^=R(r[10]+r[6],7);r[2]^=R(r[14]+r[10],9);r[6]^=R(r[2]+r[14],13);r[10]^=R(r[6]+r[2],18);r[3]^=R(r[15]+r[11],7);r[7]^=R(r[3]+r[15],9);r[11]^=R(r[7]+r[3],13);r[15]^=R(r[11]+r[7],18);r[1]^=R(r[0]+r[3],7);r[2]^=R(r[1]+r[0],9);r[3]^=R(r[2]+r[1],13);r[0]^=R(r[3]+r[2],18);r[6]^=R(r[5]+r[4],7);r[7]^=R(r[6]+r[5],9);r[4]^=R(r[7]+r[6],13);r[5]^=R(r[4]+r[7],18);r[11]^=R(r[10]+r[9],7);r[8]^=R(r[11]+r[10],9);r[9]^=R(r[8]+r[11],13);r[10]^=R(r[9]+r[8],18);r[12]^=R(r[15]+r[14],7);r[13]^=R(r[12]+r[15],9);r[14]^=R(r[13]+r[12],13);r[15]^=R(r[14]+r[13],18)}for(i=0;i<16;++i)e[i]=r[i]+e[i];for(i=0;i<16;i++){var n=i*4;t[n+0]=e[i]>>0&255;t[n+1]=e[i]>>8&255;t[n+2]=e[i]>>16&255;t[n+3]=e[i]>>24&255}}function blockxor(t,e,r,i,n){var o=n>>6;while(o--){r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++];r[i++]^=t[e++]}}function integerify(t,e,r){var i;e+=(2*r-1)*64;i=(t[e+0]&255)<<0;i|=(t[e+1]&255)<<8;i|=(t[e+2]&255)<<16;i|=(t[e+3]&255)<<24;return i}function arraycopy(t,e,r,i,n){while(n--){r[i++]=t[e++]}}function arraycopy16(t,e,r,i,n){var o=n>>4;while(o--){r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++]}}function arraycopy32(t,e,r,i,n){var o=n>>5;while(o--){r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++];r[i++]=t[e++]}}function SecureRandom(){}SecureRandom.prototype.clientSideRandomInit=function(){sjcl.random.startCollectors()};SecureRandom.prototype.nextBytes=function(t){var e=t.length;var r=sjcl.random.randomWords(e);for(var i=0;i<e;++i){if(r[i]<0){r[i]=-r[i]}t[i]=r[i]%256}};var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(t,e,r){if(t!=null)if("number"==typeof t)this.fromNumber(t,e,r);else if(e==null&&"string"!=typeof t)this.fromString(t,256);else this.fromString(t,e)}function nbi(){return new BigInteger(null)}function am1(t,e,r,i,n,o){while(--o>=0){var s=e*this[t++]+r[i]+n;n=Math.floor(s/67108864);r[i++]=s&67108863}return n}function am2(t,e,r,i,n,o){var s=e&32767,a=e>>15;while(--o>=0){var u=this[t]&32767;var h=this[t++]>>15;var p=a*u+h*s;u=s*u+((p&32767)<<15)+r[i]+(n&1073741823);n=(u>>>30)+(p>>>15)+a*h+(n>>>30);r[i++]=u&1073741823}return n}function am3(t,e,r,i,n,o){var s=e&16383,a=e>>14;while(--o>=0){var u=this[t]&16383;var h=this[t++]>>14;var p=a*u+h*s;u=s*u+((p&16383)<<14)+r[i]+n;n=(u>>28)+(p>>14)+a*h;r[i++]=u&268435455}return n}if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var r=BI_RC[t.charCodeAt(e)];return r==null?-1:r}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t;t.s=this.s}function bnpFromInt(t){this.t=1;this.s=t<0?-1:0;if(t>0)this[0]=t;else if(t<-1)this[0]=t+this.DV;else this.t=0}function nbv(t){var e=nbi();e.fromInt(t);return e}function bnpFromString(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0;this.s=0;var i=t.length,n=false,o=0;while(--i>=0){var s=r==8?t[i]&255:intAt(t,i);if(s<0){if(t.charAt(i)=="-")n=true;continue}n=false;if(o==0)this[this.t++]=s;else if(o+r>this.DB){this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o;this[this.t++]=s>>this.DB-o}else this[this.t-1]|=s<<o;o+=r;if(o>=this.DB)o-=this.DB}if(r==8&&(t[0]&128)!=0){this.s=-1;if(o>0)this[this.t-1]|=(1<<this.DB-o)-1<<o}this.clamp();if(n)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=false,o="",s=this.t;var a=this.DB-s*this.DB%e;if(s-->0){if(a<this.DB&&(i=this[s]>>a)>0){n=true;o=int2char(i)}while(s>=0){if(a<e){i=(this[s]&(1<<a)-1)<<e-a;i|=this[--s]>>(a+=this.DB-e)}else{i=this[s]>>(a-=e)&r;if(a<=0){a+=this.DB;--s}}if(i>0)n=true;if(n)o+=int2char(i)}}return n?o:"0"}function bnNegate(){var t=nbi();BigInteger.ZERO.subTo(this,t);return t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;e=r-t.t;if(e!=0)return this.s<0?-e:e;while(--r>=0)if((e=this[r]-t[r])!=0)return e;return 0}function nbits(t){var e=1,r;if((r=t>>>16)!=0){t=r;e+=16}if((r=t>>8)!=0){t=r;e+=8}if((r=t>>4)!=0){t=r;e+=4}if((r=t>>2)!=0){t=r;e+=2}if((r=t>>1)!=0){t=r;e+=1}return e}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t;e.s=this.s}function bnpDRShiftTo(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0);e.s=this.s}function bnpLShiftTo(t,e){var r=t%this.DB;
var i=this.DB-r;var n=(1<<i)-1;var o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a){e[a+o+1]=this[a]>>i|s;s=(this[a]&n)<<r}for(a=o-1;a>=0;--a)e[a]=0;e[o]=s;e.t=this.t+o+1;e.s=this.s;e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB;var n=this.DB-i;var o=(1<<i)-1;e[0]=this[r]>>i;for(var s=r+1;s<this.t;++s){e[s-r-1]|=(this[s]&o)<<n;e[s-r]=this[s]>>i}if(i>0)e[this.t-r-1]|=(this.s&o)<<n;e.t=this.t-r;e.clamp()}function bnpSubTo(t,e){var r=0,i=0,n=Math.min(t.t,this.t);while(r<n){i+=this[r]-t[r];e[r++]=i&this.DM;i>>=this.DB}if(t.t<this.t){i-=t.s;while(r<this.t){i+=this[r];e[r++]=i&this.DM;i>>=this.DB}i+=this.s}else{i+=this.s;while(r<t.t){i-=t[r];e[r++]=i&this.DM;i>>=this.DB}i-=t.s}e.s=i<0?-1:0;if(i<-1)e[r++]=this.DV+i;else if(i>0)e[r++]=i;e.t=r;e.clamp()}function bnpMultiplyTo(t,e){var r=this.abs(),i=t.abs();var n=r.t;e.t=n+i.t;while(--n>=0)e[n]=0;for(n=0;n<i.t;++n)e[n+r.t]=r.am(0,i[n],e,n,0,r.t);e.s=0;e.clamp();if(this.s!=t.s)BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){var e=this.abs();var r=t.t=2*e.t;while(--r>=0)t[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e[r],t,2*r,0,1);if((t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,i,e.t-r-1))>=e.DV){t[r+e.t]-=e.DV;t[r+e.t+1]=1}}if(t.t>0)t[t.t-1]+=e.am(r,e[r],t,2*r,0,1);t.s=0;t.clamp()}function bnpDivRemTo(t,e,r){var i=t.abs();if(i.t<=0)return;var n=this.abs();if(n.t<i.t){if(e!=null)e.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var o=nbi(),s=this.s,a=t.s;var u=this.DB-nbits(i[i.t-1]);if(u>0){i.lShiftTo(u,o);n.lShiftTo(u,r)}else{i.copyTo(o);n.copyTo(r)}var h=o.t;var p=o[h-1];if(p==0)return;var c=p*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0);var f=this.FV/c,l=(1<<this.F1)/c,v=1<<this.F2;var g=r.t,d=g-h,y=e==null?nbi():e;o.dlShiftTo(d,y);if(r.compareTo(y)>=0){r[r.t++]=1;r.subTo(y,r)}BigInteger.ONE.dlShiftTo(h,y);y.subTo(o,o);while(o.t<h)o[o.t++]=0;while(--d>=0){var F=r[--g]==p?this.DM:Math.floor(r[g]*f+(r[g-1]+v)*l);if((r[g]+=o.am(0,F,r,d,0,h))<F){o.dlShiftTo(d,y);r.subTo(y,r);while(r[g]<--F)r.subTo(y,r)}}if(e!=null){r.drShiftTo(h,e);if(s!=a)BigInteger.ZERO.subTo(e,e)}r.t=h;r.clamp();if(u>0)r.rShiftTo(u,r);if(s<0)BigInteger.ZERO.subTo(r,r)}function bnMod(t){var e=nbi();this.abs().divRemTo(t,null,e);if(this.s<0&&e.compareTo(BigInteger.ZERO)>0)t.subTo(e,e);return e}function Classic(t){this.m=t}function cConvert(t){if(t.s<0||t.compareTo(this.m)>=0)return t.mod(this.m);else return t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,r){t.multiplyTo(e,r);this.reduce(r)}function cSqrTo(t,e){t.squareTo(e);this.reduce(e)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var e=t&3;e=e*(2-(t&15)*e)&15;e=e*(2-(t&255)*e)&255;e=e*(2-((t&65535)*e&65535))&65535;e=e*(2-t*e%this.DV)%this.DV;return e>0?this.DV-e:-e}function Montgomery(t){this.m=t;this.mp=t.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<t.DB-15)-1;this.mt2=2*t.t}function montConvert(t){var e=nbi();t.abs().dlShiftTo(this.m.t,e);e.divRemTo(this.m,null,e);if(t.s<0&&e.compareTo(BigInteger.ZERO)>0)this.m.subTo(e,e);return e}function montRevert(t){var e=nbi();t.copyTo(e);this.reduce(e);return e}function montReduce(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t[e]&32767;var i=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t;t[r]+=this.m.am(0,i,t,e,0,this.m.t);while(t[r]>=t.DV){t[r]-=t.DV;t[++r]++}}t.clamp();t.drShiftTo(this.m.t,t);if(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e);this.reduce(e)}function montMulTo(t,e,r){t.multiplyTo(e,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger.ONE;var r=nbi(),i=nbi(),n=e.convert(this),o=nbits(t)-1;n.copyTo(r);while(--o>=0){e.sqrTo(r,i);if((t&1<<o)>0)e.mulTo(i,n,r);else{var s=r;r=i;i=s}}return e.revert(r)}function bnModPowInt(t,e){var r;if(t<256||e.isEven())r=new Classic(e);else r=new Montgomery(e);return this.exp(t,r)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var t=nbi();this.copyTo(t);return t}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(t){if(t==null)t=10;if(this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t);var r=Math.pow(t,e);var i=nbv(r),n=nbi(),o=nbi(),s="";this.divRemTo(i,n,o);while(n.signum()>0){s=(r+o.intValue()).toString(t).substr(1)+s;n.divRemTo(i,n,o)}return o.intValue().toString(t)+s}function bnpFromRadix(t,e){this.fromInt(0);if(e==null)e=10;var r=this.chunkSize(e);var i=Math.pow(e,r),n=false,o=0,s=0;for(var a=0;a<t.length;++a){var u=intAt(t,a);if(u<0){if(t.charAt(a)=="-"&&this.signum()==0)n=true;continue}s=e*s+u;if(++o>=r){this.dMultiply(i);this.dAddOffset(s,0);o=0;s=0}}if(o>0){this.dMultiply(Math.pow(e,o));this.dAddOffset(s,0)}if(n)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,r){if("number"==typeof e){if(t<2)this.fromInt(1);else{this.fromNumber(t,r);if(!this.testBit(t-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(e)){this.dAddOffset(2,0);if(this.bitLength()>t)this.subTo(BigInteger.ONE.shiftLeft(t-1),this)}}}else{var i=new Array,n=t&7;i.length=(t>>3)+1;e.nextBytes(i);if(n>0)i[0]&=(1<<n)-1;else i[0]=0;this.fromString(i,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-->0){if(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r)e[n++]=i|this.s<<this.DB-r;while(t>=0){if(r<8){i=(this[t]&(1<<r)-1)<<8-r;i|=this[--t]>>(r+=this.DB-8)}else{i=this[t]>>(r-=8)&255;if(r<=0){r+=this.DB;--t}}if((i&128)!=0)i|=-256;if(n==0&&(this.s&128)!=(i&128))++n;if(n>0||i!=this.s)e[n++]=i}}return e}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,r){var i,n,o=Math.min(t.t,this.t);for(i=0;i<o;++i)r[i]=e(this[i],t[i]);if(t.t<this.t){n=t.s&this.DM;for(i=o;i<this.t;++i)r[i]=e(this[i],n);r.t=this.t}else{n=this.s&this.DM;for(i=o;i<t.t;++i)r[i]=e(n,t[i]);r.t=t.t}r.s=e(this.s,t.s);r.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();this.bitwiseTo(t,op_and,e);return e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();this.bitwiseTo(t,op_or,e);return e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();this.bitwiseTo(t,op_xor,e);return e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();this.bitwiseTo(t,op_andnot,e);return e}function bnNot(){var t=nbi();for(var e=0;e<this.t;++e)t[e]=this.DM&~this[e];t.t=this.t;t.s=~this.s;return t}function bnShiftLeft(t){var e=nbi();if(t<0)this.rShiftTo(-t,e);else this.lShiftTo(t,e);return e}function bnShiftRight(t){var e=nbi();if(t<0)this.lShiftTo(-t,e);else this.rShiftTo(t,e);return e}function lbit(t){if(t==0)return-1;var e=0;if((t&65535)==0){t>>=16;e+=16}if((t&255)==0){t>>=8;e+=8}if((t&15)==0){t>>=4;e+=4}if((t&3)==0){t>>=2;e+=2}if((t&1)==0)++e;return e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+lbit(this[t]);if(this.s<0)return this.t*this.DB;return-1}function cbit(t){var e=0;while(t!=0){t&=t-1;++e}return e}function bnBitCount(){var t=0,e=this.s&this.DM;for(var r=0;r<this.t;++r)t+=cbit(this[r]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);if(e>=this.t)return this.s!=0;return(this[e]&1<<t%this.DB)!=0}function bnpChangeBit(t,e){var r=BigInteger.ONE.shiftLeft(t);this.bitwiseTo(r,e,r);return r}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){var r=0,i=0,n=Math.min(t.t,this.t);while(r<n){i+=this[r]+t[r];e[r++]=i&this.DM;i>>=this.DB}if(t.t<this.t){i+=t.s;while(r<this.t){i+=this[r];e[r++]=i&this.DM;i>>=this.DB}i+=this.s}else{i+=this.s;while(r<t.t){i+=t[r];e[r++]=i&this.DM;i>>=this.DB}i+=t.s}e.s=i<0?-1:0;if(i>0)e[r++]=i;else if(i<-1)e[r++]=this.DV+i;e.t=r;e.clamp()}function bnAdd(t){var e=nbi();this.addTo(t,e);return e}function bnSubtract(t){var e=nbi();this.subTo(t,e);return e}function bnMultiply(t){var e=nbi();this.multiplyTo(t,e);return e}function bnSquare(){var t=nbi();this.squareTo(t);return t}function bnDivide(t){var e=nbi();this.divRemTo(t,e,null);return e}function bnRemainder(t){var e=nbi();this.divRemTo(t,null,e);return e}function bnDivideAndRemainder(t){var e=nbi(),r=nbi();this.divRemTo(t,e,r);return new Array(e,r)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(t,e){if(t==0)return;while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV){this[e]-=this.DV;if(++e>=this.t)this[this.t++]=0;++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,r){t.multiplyTo(e,r)}function nSqrTo(t,e){t.squareTo(e)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,r){var i=Math.min(this.t+t.t,e);r.s=0;r.t=i;while(i>0)r[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()}function bnpMultiplyUpperTo(t,e,r){--e;var i=r.t=this.t+t.t-e;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r[this.t+i-e]=this.am(e-i,t[i],r,0,0,this.t+i-e);r.clamp();r.drShiftTo(1,r)}function Barrett(t){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*t.t,this.r2);this.mu=this.r2.divide(t);this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);else if(t.compareTo(this.m)<0)return t;else{var e=nbi();t.copyTo(e);this.reduce(e);return e}}function barrettRevert(t){return t}function barrettReduce(t){t.drShiftTo(this.m.t-1,this.r2);if(t.t>this.m.t+1){t.t=this.m.t+1;t.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e);this.reduce(e)}function barrettMulTo(t,e,r){t.multiplyTo(e,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,e){var r=t.bitLength(),i,n=nbv(1),o;if(r<=0)return n;else if(r<18)i=1;else if(r<48)i=3;else if(r<144)i=4;else if(r<768)i=5;else i=6;if(r<8)o=new Classic(e);else if(e.isEven())o=new Barrett(e);else o=new Montgomery(e);var s=new Array,a=3,u=i-1,h=(1<<i)-1;s[1]=o.convert(this);if(i>1){var p=nbi();o.sqrTo(s[1],p);while(a<=h){s[a]=nbi();o.mulTo(p,s[a-2],s[a]);a+=2}}var c=t.t-1,f,l=true,v=nbi(),g;r=nbits(t[c])-1;while(c>=0){if(r>=u)f=t[c]>>r-u&h;else{f=(t[c]&(1<<r+1)-1)<<u-r;if(c>0)f|=t[c-1]>>this.DB+r-u}a=i;while((f&1)==0){f>>=1;--a}if((r-=a)<0){r+=this.DB;--c}if(l){s[f].copyTo(n);l=false}else{while(a>1){o.sqrTo(n,v);o.sqrTo(v,n);a-=2}if(a>0)o.sqrTo(n,v);else{g=n;n=v;v=g}o.mulTo(v,s[f],n)}while(c>=0&&(t[c]&1<<r)==0){o.sqrTo(n,v);g=n;n=v;v=g;if(--r<0){r=this.DB-1;--c}}}return o.revert(n)}function bnGCD(t){var e=this.s<0?this.negate():this.clone();var r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r;r=i}var n=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;if(n<o)o=n;if(o>0){e.rShiftTo(o,e);r.rShiftTo(o,r)}while(e.signum()>0){if((n=e.getLowestSetBit())>0)e.rShiftTo(n,e);if((n=r.getLowestSetBit())>0)r.rShiftTo(n,r);if(e.compareTo(r)>=0){e.subTo(r,e);e.rShiftTo(1,e)}else{r.subTo(e,r);r.rShiftTo(1,r)}}if(o>0)r.lShiftTo(o,r);return r}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this[i])%t;return r}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return BigInteger.ZERO;var r=t.clone(),i=this.clone();var n=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);while(r.signum()!=0){while(r.isEven()){r.rShiftTo(1,r);if(e){if(!n.isEven()||!o.isEven()){n.addTo(this,n);o.subTo(t,o)}n.rShiftTo(1,n)}else if(!o.isEven())o.subTo(t,o);o.rShiftTo(1,o)}while(i.isEven()){i.rShiftTo(1,i);if(e){if(!s.isEven()||!a.isEven()){s.addTo(this,s);a.subTo(t,a)}s.rShiftTo(1,s)}else if(!a.isEven())a.subTo(t,a);a.rShiftTo(1,a)}if(r.compareTo(i)>=0){r.subTo(i,r);if(e)n.subTo(s,n);o.subTo(a,o)}else{i.subTo(r,i);if(e)s.subTo(n,s);a.subTo(o,a)}}if(i.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;if(a.signum()<0)return a.add(t);else return a}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,r=this.abs();if(r.t==1&&r[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(r[0]==lowprimes[e])return true;return false}if(r.isEven())return false;e=1;while(e<lowprimes.length){var i=lowprimes[e],n=e+1;while(n<lowprimes.length&&i<lplim)i*=lowprimes[n++];i=r.modInt(i);while(e<n)if(i%lowprimes[e++]==0)return false}return r.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE);var r=e.getLowestSetBit();if(r<=0)return false;var i=e.shiftRight(r);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var n=nbi();for(var o=0;o<t;++o){n.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var s=n.modPow(i,this);if(s.compareTo(BigInteger.ONE)!=0&&s.compareTo(e)!=0){var a=1;while(a++<r&&s.compareTo(e)!=0){s=s.modPowInt(2,this);if(s.compareTo(BigInteger.ONE)==0)return false}if(s.compareTo(e)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;function ECFieldElementFp(t,e){this.x=e;this.q=t}function feFpEquals(t){if(t==this)return true;return this.q.equals(t.q)&&this.x.equals(t.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(t){return new ECFieldElementFp(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function feFpSubtract(t){return new ECFieldElementFp(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function feFpMultiply(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}ECFieldElementFp.prototype.equals=feFpEquals;ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger;ECFieldElementFp.prototype.negate=feFpNegate;ECFieldElementFp.prototype.add=feFpAdd;ECFieldElementFp.prototype.subtract=feFpSubtract;ECFieldElementFp.prototype.multiply=feFpMultiply;ECFieldElementFp.prototype.square=feFpSquare;ECFieldElementFp.prototype.divide=feFpDivide;function ECPointFp(t,e,r,i){this.curve=t;this.x=e;this.y=r;if(i==null){this.z=BigInteger.ONE}else{this.z=i}this.zinv=null}function pointFpGetX(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}return this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}return this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(t){if(t==this)return true;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,r;e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q);if(!e.equals(BigInteger.ZERO))return false;r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);return r.equals(BigInteger.ZERO)}function pointFpIsInfinity(){if(this.x==null&&this.y==null)return true;return this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q);var r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(r)){if(BigInteger.ZERO.equals(e)){return this.twice()}return this.curve.getInfinity()}var i=new BigInteger("3");var n=this.x.toBigInteger();var o=this.y.toBigInteger();var s=t.x.toBigInteger();var a=t.y.toBigInteger();var u=r.square();var h=u.multiply(r);var p=n.multiply(u);var c=e.square().multiply(this.z);var f=c.subtract(p.shiftLeft(1)).multiply(t.z).subtract(h).multiply(r).mod(this.curve.q);var l=p.multiply(i).multiply(e).subtract(o.multiply(h)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(h)).mod(this.curve.q);var v=h.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(f),this.curve.fromBigInteger(l),v)}function pointFpTwice(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new BigInteger("3");var e=this.x.toBigInteger();var r=this.y.toBigInteger();var i=r.multiply(this.z);var n=i.multiply(r).mod(this.curve.q);var o=this.curve.a.toBigInteger();var s=e.square().multiply(t);if(!BigInteger.ZERO.equals(o)){s=s.add(this.z.square().multiply(o))}s=s.mod(this.curve.q);var a=s.square().subtract(e.shiftLeft(3).multiply(n)).shiftLeft(1).multiply(i).mod(this.curve.q);var u=s.multiply(t).multiply(e).subtract(n.shiftLeft(1)).shiftLeft(2).multiply(n).subtract(s.square().multiply(s)).mod(this.curve.q);var h=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),h)}function pointFpMultiply(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t;var r=e.multiply(new BigInteger("3"));var i=this.negate();var n=this;var o;for(o=r.bitLength()-2;o>0;--o){n=n.twice();var s=r.testBit(o);var a=e.testBit(o);if(s!=a){n=n.add(s?this:i)}}return n}function pointFpMultiplyTwo(t,e,r){var i;if(t.bitLength()>r.bitLength())i=t.bitLength()-1;else i=r.bitLength()-1;var n=this.curve.getInfinity();var o=this.add(e);while(i>=0){n=n.twice();if(t.testBit(i)){if(r.testBit(i)){n=n.add(o)}else{n=n.add(this)}}else{if(r.testBit(i)){n=n.add(e)}}--i}return n}ECPointFp.prototype.getX=pointFpGetX;ECPointFp.prototype.getY=pointFpGetY;ECPointFp.prototype.equals=pointFpEquals;ECPointFp.prototype.isInfinity=pointFpIsInfinity;ECPointFp.prototype.negate=pointFpNegate;ECPointFp.prototype.add=pointFpAdd;ECPointFp.prototype.twice=pointFpTwice;ECPointFp.prototype.multiply=pointFpMultiply;ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo;function ECCurveFp(t,e,r){this.q=t;this.a=this.fromBigInteger(e);this.b=this.fromBigInteger(r);this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(t){if(t==this)return true;return this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(t){return new ECFieldElementFp(this.q,t)}function curveFpDecompressPoint(t,e){if(this.q.mod(BigInteger.valueOf(4)).equals(BigInteger.valueOf(3))){var r=e.multiply(e.square().add(this.a)).add(this.b);var i=r.x.modPow(this.q.add(BigInteger.ONE).divide(BigInteger.valueOf(4)),this.q);if(i.testBit(0)!==t){i=this.q.subtract(i)}return new ECPointFp(this,e,this.fromBigInteger(i))}else{throw new Error("point decompression only implements sqrt for q = 3 mod 4")}}function curveFpDecodePointHex(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:return this.decompressPoint(false,this.fromBigInteger(new BigInteger(t.substr(2),16)));case 3:return this.decompressPoint(true,this.fromBigInteger(new BigInteger(t.substr(2),16)));case 4:case 6:case 7:var e=(t.length-2)/2;var r=t.substr(2,e);var i=t.substr(e+2,e);return new ECPointFp(this,this.fromBigInteger(new BigInteger(r,16)),this.fromBigInteger(new BigInteger(i,16)));default:return null}}ECCurveFp.prototype.getQ=curveFpGetQ;ECCurveFp.prototype.getA=curveFpGetA;ECCurveFp.prototype.getB=curveFpGetB;ECCurveFp.prototype.equals=curveFpEquals;ECCurveFp.prototype.getInfinity=curveFpGetInfinity;ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger;ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex;ECCurveFp.prototype.decompressPoint=curveFpDecompressPoint;function X9ECParameters(t,e,r,i){this.curve=t;this.g=e;this.n=r;this.h=i}function x9getCurve(){return this.curve}function x9getG(){return this.g}function x9getN(){return this.n}function x9getH(){return this.h}X9ECParameters.prototype.getCurve=x9getCurve;X9ECParameters.prototype.getG=x9getG;X9ECParameters.prototype.getN=x9getN;X9ECParameters.prototype.getH=x9getH;function fromHex(t){return new BigInteger(t,16)}function secp128r1(){var t=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF");var e=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC");var r=fromHex("E87579C11079F43DD824993C2CEE5ED3");var i=fromHex("FFFFFFFE0000000075A30D1B9038A115");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"161FF7528B899B2D0C28607CA52C5B86"+"CF5AC8395BAFEB13C02DA292DDED7A83");return new X9ECParameters(o,s,i,n)}function secp160k1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73");var e=BigInteger.ZERO;var r=fromHex("7");var i=fromHex("0100000000000000000001B8FA16DFAB9ACA16B6B3");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB"+"938CF935318FDCED6BC28286531733C3F03C4FEE");return new X9ECParameters(o,s,i,n)}function secp160r1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF");var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC");var r=fromHex("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45");var i=fromHex("0100000000000000000001F4C8F927AED3CA752257");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"4A96B5688EF573284664698968C38BB913CBFC82"+"23A628553168947D59DCC912042351377AC5FB32");return new X9ECParameters(o,s,i,n)}function secp192k1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37");var e=BigInteger.ZERO;var r=fromHex("3");var i=fromHex("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D"+"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new X9ECParameters(o,s,i,n)}function secp192r1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF");var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC");var r=fromHex("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1");var i=fromHex("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012"+"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new X9ECParameters(o,s,i,n)}function secp224r1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001");var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE");var r=fromHex("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4");var i=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21"+"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new X9ECParameters(o,s,i,n)}function secp256k1(){var t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F");var e=BigInteger.ZERO;var r=fromHex("7");var i=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"+"483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8");return new X9ECParameters(o,s,i,n)}function secp256r1(){var t=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF");var e=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC");var r=fromHex("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B");var i=fromHex("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551");var n=BigInteger.ONE;var o=new ECCurveFp(t,e,r);var s=o.decodePointHex("04"+"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296"+"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new X9ECParameters(o,s,i,n)}function getSECCurveByName(t){if(t=="secp128r1")return secp128r1();if(t=="secp160k1")return secp160k1();if(t=="secp160r1")return secp160r1();if(t=="secp192k1")return secp192k1();if(t=="secp192r1")return secp192r1();if(t=="secp224r1")return secp224r1();if(t=="secp256k1")return secp256k1();if(t=="secp256r1")return secp256r1();return null}var EventEmitter=function(){};EventEmitter.prototype.on=function(t,e,r){if(!r)r=this;if(!this._listeners)this._listeners={};if(!this._listeners[t])this._listeners[t]=[];if(!this._unbinders)this._unbinders={};if(!this._unbinders[t])this._unbinders[t]=[];var i=function(t){e.apply(r,[t])};this._unbinders[t].push(e);this._listeners[t].push(i)};EventEmitter.prototype.trigger=function(t,e){if(e===undefined)e={};if(!this._listeners)this._listeners={};if(!this._listeners[t])return;var r=this._listeners[t].length;while(r--)this._listeners[t][r](e)};EventEmitter.prototype.removeListener=function(t,e){if(!this._unbinders)this._unbinders={};if(!this._unbinders[t])return;var r=this._unbinders[t].length;while(r--){if(this._unbinders[t][r]===e){this._unbinders[t].splice(r,1);this._listeners[t].splice(r,1)}}};EventEmitter.augment=function(t){for(var e in EventEmitter.prototype){if(!t[e])t[e]=EventEmitter.prototype[e]}};BigInteger.valueOf=nbv;BigInteger.prototype.toByteArrayUnsigned=function(){var t=this.abs().toByteArray();if(t.length){if(t[0]==0){t=t.slice(1)}return t.map(function(t){return t<0?t+256:t})}else{return t}};BigInteger.fromByteArrayUnsigned=function(t){if(!t.length){return t.valueOf(0)}else if(t[0]&128){return new BigInteger([0].concat(t))}else{return new BigInteger(t)}};BigInteger.prototype.toByteArraySigned=function(){var t=this.abs().toByteArrayUnsigned();var e=this.compareTo(BigInteger.ZERO)<0;if(e){if(t[0]&128){t.unshift(128)}else{t[0]|=128}}else{if(t[0]&128){t.unshift(0)}}return t};BigInteger.fromByteArraySigned=function(t){if(t[0]&128){t[0]&=127;return BigInteger.fromByteArrayUnsigned(t).negate()}else{return BigInteger.fromByteArrayUnsigned(t)}};var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];if("undefined"==typeof window.console)window.console={};for(var i=0;i<names.length;++i)if("undefined"==typeof window.console[names[i]])window.console[names[i]]=function(){};Bitcoin.Util={isArray:Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},makeFilledArray:function(t,e){var r=[];var i=0;while(i<t){r[i++]=e}return r},numToVarInt:function(t){if(t<253){return[t]}else if(t<=1<<16){return[253,t&255,t>>>8]}else if(t<=1<<32){return[254].concat(Crypto.util.wordsToBytes([t]).reverse())}else{throw"long long not implemented"}},valueToBigInt:function(t){if(t instanceof BigInteger)return t;return BigInteger.fromByteArrayUnsigned(t)},formatValue:function(t){var e=this.valueToBigInt(t).toString();var r=e.length>8?e.substr(0,e.length-8):"0";var i=e.length>8?e.substr(e.length-8):e;
while(i.length<8)i="0"+i;i=i.replace(/0*$/,"");while(i.length<2)i+="0";return r+"."+i},parseValue:function(t){var e=t.split(".");var r=e[0];var i=e[1]||"0";while(i.length<8)i+="0";i=i.replace(/^0+/g,"");var n=BigInteger.valueOf(parseInt(r));n=n.multiply(BigInteger.valueOf(1e8));n=n.add(BigInteger.valueOf(parseInt(i)));return n},sha256ripe160:function(t){return Crypto.RIPEMD160(Crypto.SHA256(t,{asBytes:true}),{asBytes:true})},dsha256:function(t){return Crypto.SHA256(Crypto.SHA256(t,{asBytes:true}),{asBytes:true})}};for(var i in Crypto.util){if(Crypto.util.hasOwnProperty(i)){Bitcoin.Util[i]=Crypto.util[i]}}(function(t){t.Base58={alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",validRegex:/^[1-9A-HJ-NP-Za-km-z]+$/,base:BigInteger.valueOf(58),encode:function(t){var r=BigInteger.fromByteArrayUnsigned(t);var i=[];while(r.compareTo(e.base)>=0){var n=r.mod(e.base);i.unshift(e.alphabet[n.intValue()]);r=r.subtract(n).divide(e.base)}i.unshift(e.alphabet[r.intValue()]);for(var o=0;o<t.length;o++){if(t[o]==0){i.unshift(e.alphabet[0])}else break}return i.join("")},decode:function(t){var r=BigInteger.valueOf(0);var i=0;for(var n=t.length-1;n>=0;n--){var o=e.alphabet.indexOf(t[n]);if(o<0){throw"Invalid character"}r=r.add(BigInteger.valueOf(o).multiply(e.base.pow(t.length-1-n)));if(t[n]=="1")i++;else i=0}var s=r.toByteArrayUnsigned();while(i-->0)s.unshift(0);return s},encodeFromString:function(t){if(typeof t!=="string"){throw"input must be a string"}var e=[];for(var r=0;r<t.length;++r){e.push(t.charCodeAt(r))}return this.encode(e)},decodeToString:function(t){if(typeof t!=="string"){throw"input must be a string"}var e="";var r=this.decode(t);for(var i=0;i<r.length;++i){e+=String.fromCharCode(parseInt(r[i],10))}return e}};var e=t.Base58})("undefined"!=typeof Bitcoin?Bitcoin:module.exports);Bitcoin.BIP38=function(){var t=function(){};var e=getSECCurveByName("secp256k1");var r=new SecureRandom;var i={passphrase:{N:16384,r:8,p:8},passphraseFast:{N:2048,r:4,p:4},passpoint:{N:1024,r:1,p:1}};var n={mode:new Crypto.mode.ECB(Crypto.pad.NoPadding),asBytes:true};t.encode=function(t,e){var r=t.getPrivateKeyByteArray();var o=t.getBitcoinAddress().toString();var s=Bitcoin.Util.dsha256(o).slice(0,4);var a=Bitcoin.scrypt(e,s,i.passphraseFast.N,i.passphraseFast.r,i.passphraseFast.p,64);for(var u=0;u<32;++u){r[u]^=a[u]}var h=t.compressed?224:192;var p=[1,66,h].concat(s);var p=p.concat(Crypto.AES.encrypt(r,a.slice(32),n));p=p.concat(Bitcoin.Util.dsha256(p).slice(0,4));return Bitcoin.Base58.encode(p)};t.decode=function(t,r){var o;try{o=Bitcoin.Base58.decode(t)}catch(s){throw new Error("Invalid BIP38-encrypted private key. Unable to decode base58.")}if(o.length!=43){throw new Error("Invalid BIP38-encrypted private key. Length of key in hex format is not 43 characters in length.")}else if(o[0]!=1){throw new Error("Invalid BIP38-encrypted private key. First byte is not 0x01.")}var a=o.slice(-4);o=o.slice(0,-4);var u=Bitcoin.Util.dsha256(o);if(u[0]!=a[0]||u[1]!=a[1]||u[2]!=a[2]||u[3]!=a[3]){throw new Error("Invalid BIP38-encrypted private key. Checksum failed.")}var h=false;var p=false;var c=false;if(o[1]==66){if(o[2]==224){h=true}else if(o[2]!=192){throw new Error("Invalid BIP38-encrypted private key. Second byte should be 0xc0.")}}else if(o[1]==67){p=true;h=(o[2]&32)!=0;c=(o[2]&4)!=0;if((o[2]&36)!=o[2]){throw new Error("Invalid BIP38-encrypted private key. Unknown validation error.")}}else{throw new Error("Invalid BIP38-encrypted private key. Unknown validation error.")}var f;var l=function(){var t=new Bitcoin.ECKey(f);t.setCompressed(h);var e=t.getBitcoinAddress();u=Bitcoin.Util.dsha256(e.toString());if(u[0]!=o[3]||u[1]!=o[4]||u[2]!=o[5]||u[3]!=o[6]){throw new Error("Invalid BIP38-encrypted private key. Hash could not be verified.")}return t};if(!p){var v=o.slice(3,7);var g=Bitcoin.scrypt(r,v,i.passphraseFast.N,i.passphraseFast.r,i.passphraseFast.p,64);var d=g.slice(32,32+32);f=Crypto.AES.decrypt(o.slice(7,7+32),d,n);for(var y=0;y<32;y++)f[y]^=g[y];return l()}else{var F=o.slice(7,7+8);var B=!c?F:F.slice(0,4);var m=Bitcoin.scrypt(r,B,i.passphraseFast.N,i.passphraseFast.r,i.passphraseFast.p,32);var b;if(!c){b=m}else{var w=m.concat(F);b=Bitcoin.Util.dsha256(w)}var I=new Bitcoin.ECKey(b);I.compressed=true;var E=I.getPub();var T=o.slice(23,23+16);var C=o.slice(3,3+12);var P=Bitcoin.scrypt(E,C,i.passpoint.N,i.passpoint.r,i.passpoint.p,64);var d=P.slice(32);var _=Crypto.AES.decrypt(T,d,n);for(var A=0;A<16;A++){_[A]^=P[A+16]}var S=o.slice(15,15+8).concat(_.slice(0,0+8));var O=Crypto.AES.decrypt(S,d,n);for(var A=0;A<16;A++){O[A]^=P[A]}var x=O.slice(0,0+16).concat(_.slice(8,8+8));var D=Bitcoin.Util.dsha256(x);var k=BigInteger.fromByteArrayUnsigned(b).multiply(BigInteger.fromByteArrayUnsigned(D)).remainder(e.getN());f=k.toByteArrayUnsigned();return l()}};t.generateIntermediate=function(t,n,o){var s=n==null||o==null;var a,u;if(s){u=a=new Array(8);r.nextBytes(a)}else{var u=Array(4);r.nextBytes(u);var h=nbv(4096*n+o).toByteArrayUnsigned();var a=u.concat(h)}var p=Bitcoin.scrypt(t,u,i.passphraseFast.N,i.passphraseFast.r,i.passphraseFast.p,32);var c=s?p:Bitcoin.Util.dsha256(p.concat(a));var f=BigInteger.fromByteArrayUnsigned(c);var l=e.getG().multiply(f).getEncoded(1);var v=[44,233,179,225,255,57,226,81];if(s)v[7]=83;var g=v.concat(a).concat(l);var d=g.concat(Bitcoin.Util.dsha256(g).slice(0,4));var y=Bitcoin.Base58.encode(d);return y};t.newAddressFromIntermediate=function(s,a){if(!t.verifyIntermediate(s)){throw new Error("Invalid intermediate passphrase string")}var u=Bitcoin.Base58.decode(s);var h=u[7]===83;var p=u.slice(8,8+8);var c=u.slice(16,16+33);var f=(a?32:0)|(h?0:4);var l=new Array(24);r.nextBytes(l);var v=Bitcoin.Util.dsha256(l);var g=e.getCurve();var d=g.decodePointHex(Crypto.util.bytesToHex(c));var y=d.multiply(BigInteger.fromByteArrayUnsigned(v)).getEncoded(a);var F=new Bitcoin.Address(Bitcoin.Util.sha256ripe160(y));var B=Bitcoin.Util.dsha256(F.toString()).slice(0,4);var m=Bitcoin.scrypt(c,B.concat(p),i.passpoint.N,i.passpoint.r,i.passpoint.p,64);for(var b=0;b<16;++b){l[b]^=m[b]}var w=Crypto.AES.encrypt(l.slice(0,16),m.slice(32),n);var I=w.slice(8,8+8).concat(l.slice(16,16+8));for(var b=0;b<16;++b){I[b]^=m[b+16]}var E=Crypto.AES.encrypt(I,m.slice(32),n);var T=[1,67,f].concat(B).concat(p).concat(w.slice(0,8)).concat(E);T=T.concat(Bitcoin.Util.dsha256(T).slice(0,4));var C=o(B,v,m,f,p);return{address:F,bip38PrivateKey:Bitcoin.Base58.encode(T),confirmation:C}};var o=function(t,r,i,o,s){var a=e.getG().multiply(BigInteger.fromByteArrayUnsigned(r)).getEncoded(1);var u=a[0]^i[63]&1;for(var h=0;h<16;++h){a[h+1]^=i[h]}var p=Crypto.AES.encrypt(a.slice(1,17),i.slice(32),n);for(var h=16;h<32;++h){a[h+1]^=i[h]}var c=Crypto.AES.encrypt(a.slice(17,33),i.slice(32),n);var f=[u].concat(p).concat(c);var l=[100,59,246,168,154,o].concat(t).concat(s).concat(f);var v=l.concat(Bitcoin.Util.dsha256(l).slice(0,4));var g=Bitcoin.Base58.encode(v);return g};t.verifyNewAddressConfirmation=function(e,r,i){var n=t.verifyConfirmation(r,i);return n.address==e};t.verifyConfirmation=function(t,r){var o=Bitcoin.Base58.decode(t);var s=o[5];var a=o.slice(6,10);var u=o.slice(10,18);var h=o.slice(18,51);var p=(s&32)==32;var c=(s&4)==4;var f=u.slice(0,c?4:8);var l=Bitcoin.scrypt(r,f,i.passphraseFast.N,i.passphraseFast.r,i.passphraseFast.p,32);var v=!c?l:Bitcoin.Util.dsha256(l.concat(u));var g=BigInteger.fromByteArrayUnsigned(v);var d=e.getG().multiply(g).getEncoded(1);var y=a.concat(u);var F=Bitcoin.scrypt(d,y,i.passpoint.N,i.passpoint.r,i.passpoint.p,64);var B=[];B[0]=h[0]^F[63]&1;decrypted1=Crypto.AES.decrypt(h.slice(1,17),F.slice(32),n);decrypted2=Crypto.AES.decrypt(h.slice(17,33),F.slice(32),n);decrypted=B.concat(decrypted1).concat(decrypted2);for(var m=0;m<32;m++){decrypted[m+1]^=F[m]}var b=e.getCurve();var w=b.decodePointHex(Crypto.util.bytesToHex(decrypted).toString().toUpperCase());var I=w.multiply(BigInteger.fromByteArrayUnsigned(g)).getEncoded(p);var E=new Bitcoin.Address(Bitcoin.Util.sha256ripe160(I)).toString();var T=Bitcoin.Util.dsha256(E).slice(0,4);var C=true;for(var P=0;P<4;P++){if(a[P]!=T[P]){C=false}}return{valid:C,address:E}};t.verifyIntermediate=function(t){var e=/^passphrase[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+$/.test(t);if(!e)return false;var r=Bitcoin.Base58.decode(t);if(r.length!=53)return false;var i=r.slice(49,53);var n=Bitcoin.Util.dsha256(r.slice(0,49)).slice(0,4);if(i[0]!=n[0]||i[1]!=n[1]||i[2]!=n[2]||i[3]!=n[3]){return false}return true};t.isBIP38Format=function(t){return/^6P[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{56}$/.test(t)};return t}();(function(){var t=Bitcoin.Address=function(t,e){if("string"==typeof t){this.fromString(t);return this}if(t instanceof Bitcoin.ECKey){t=t.getPubKeyHash()}if(!(t instanceof Array)){throw"can't convert to address"}this.hash=t;this.version=e||Bitcoin.Address.pubKeyHashVersion};t.prototype.toString=function(){var t=this.hash.slice(0);t.unshift(this.version);var e=Crypto.SHA256(Crypto.SHA256(t,{asBytes:true}),{asBytes:true});var r=t.concat(e.slice(0,4));return Bitcoin.Base58.encode(r)};t.prototype.getHashBase64=function(){return Crypto.util.bytesToBase64(this.hash)};t.decodeString=function(t){throw"Bitcoin.Address.decodeString is depricated"};t.prototype.fromString=function(t){var e=Bitcoin.Base58.decode(t);var r=e.slice(0,21);var i=Crypto.SHA256(Crypto.SHA256(r,{asBytes:true}),{asBytes:true});if(i[0]!=e[21]||i[1]!=e[22]||i[2]!=e[23]||i[3]!=e[24]){throw"Checksum validation failed!"}this.version=r.shift();this.hash=r;if(this.version!=Bitcoin.Address.pubKeyHashVersion&&this.version!=Bitcoin.Address.p2shVersion){throw"Version "+this.version+" not supported!"}};t.createMultiSigAddress=function(t,e){if(e<0||e>t.length||e>16){throw"invalid number of keys required"}for(var r=0;r<t.length;++r){if(Object.prototype.toString.call(t[r])!="[object Array]"){throw"pub keys are not of right type"}}var i=Bitcoin.Script.createMultiSigScript(e,t);var n=i.buffer;var o=Bitcoin.Util.sha256ripe160(n);var s=new Bitcoin.Address(o);s.redeemScript=n;s.version=Bitcoin.Address.p2shVersion;return s};t.prototype.isP2SHAddress=function(){return this.version==Bitcoin.Address.p2shVersion};t.prototype.isPubKeyHashAddress=function(){return this.version==Bitcoin.Address.pubKeyHashVersion};t.validate=function(t){try{var e=new Bitcoin.Address(t)}catch(r){return false}return true};t.fromPubKey=function(t){return new Bitcoin.Address(Bitcoin.Util.sha256ripe160(t))}})();function integerToBytes(t,e){var r=t.toByteArrayUnsigned();if(e<r.length){r=r.slice(r.length-e)}else while(e>r.length){r.unshift(0)}return r}ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};ECPointFp.prototype.getEncoded=function(t){var e=this.getX().toBigInteger();var r=this.getY().toBigInteger();var i=integerToBytes(e,32);if(t){if(r.isEven()){i.unshift(2)}else{i.unshift(3)}}else{i.unshift(4);i=i.concat(integerToBytes(r,32))}return i};ECPointFp.decodeFrom=function(t,e){var r=e[0];var i=e.length-1;var n=e.slice(1,1+i/2);var o=e.slice(1+i/2,1+i);n.unshift(0);o.unshift(0);var s=new BigInteger(n);var a=new BigInteger(o);return new ECPointFp(t,t.fromBigInteger(s),t.fromBigInteger(a))};ECPointFp.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x)){if(this.y.equals(t.y)){return this.twice()}return this.curve.getInfinity()}var e=t.x.subtract(this.x);var r=t.y.subtract(this.y);var i=r.divide(e);var n=i.square().subtract(this.x).subtract(t.x);var o=i.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,o)};ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0){return this.curve.getInfinity()}var t=this.curve.fromBigInteger(BigInteger.valueOf(2));var e=this.curve.fromBigInteger(BigInteger.valueOf(3));var r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t));var i=r.square().subtract(this.x.multiply(t));var n=r.multiply(this.x.subtract(i)).subtract(this.y);return new ECPointFp(this.curve,i,n)};ECPointFp.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t;var r=e.multiply(new BigInteger("3"));var i=this.negate();var n=this;var o;for(o=r.bitLength()-2;o>0;--o){n=n.twice();var s=r.testBit(o);var a=e.testBit(o);if(s!=a){n=n.add2D(s?this:i)}}return n};ECPointFp.prototype.isOnCurve=function(){var t=this.getX().toBigInteger();var e=this.getY().toBigInteger();var r=this.curve.getA().toBigInteger();var i=this.curve.getB().toBigInteger();var n=this.curve.getQ();var o=e.multiply(e).mod(n);var s=t.multiply(t).multiply(t).add(r.multiply(t)).add(i).mod(n);return o.equals(s)};ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};ECPointFp.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity()){throw new Error("Point is at infinity.")}var e=this.getX().toBigInteger();var r=this.getY().toBigInteger();if(e.compareTo(BigInteger.ONE)<0||e.compareTo(t.subtract(BigInteger.ONE))>0){throw new Error("x coordinate out of bounds")}if(r.compareTo(BigInteger.ONE)<0||r.compareTo(t.subtract(BigInteger.ONE))>0){throw new Error("y coordinate out of bounds")}if(!this.isOnCurve()){throw new Error("Point is not on the curve.")}if(this.multiply(t).isInfinity()){throw new Error("Point is not a scalar multiple of G.")}return true};function dmp(t){if(!(t instanceof BigInteger))t=t.toBigInteger();return Crypto.util.bytesToHex(t.toByteArrayUnsigned())}Bitcoin.ECDSA=function(){var t=getSECCurveByName("secp256k1");var e=new SecureRandom;var r=null;function i(t,e,r,i){var n=Math.max(e.bitLength(),i.bitLength());var o=t.add2D(r);var s=t.curve.getInfinity();for(var a=n-1;a>=0;--a){s=s.twice2D();s.z=BigInteger.ONE;if(e.testBit(a)){if(i.testBit(a)){s=s.add2D(o)}else{s=s.add2D(t)}}else{if(i.testBit(a)){s=s.add2D(r)}}}return s}var n={getBigRandom:function(t){return new BigInteger(t.bitLength(),e).mod(t.subtract(BigInteger.ONE)).add(BigInteger.ONE)},sign:function(e,r){var i=r;var o=t.getN();var s=BigInteger.fromByteArrayUnsigned(e);do{var a=n.getBigRandom(o);var u=t.getG();var h=u.multiply(a);var p=h.getX().toBigInteger().mod(o)}while(p.compareTo(BigInteger.ZERO)<=0);var c=a.modInverse(o).multiply(s.add(i.multiply(p))).mod(o);return n.serializeSig(p,c)},verify:function(e,r,i){var o,s;if(Bitcoin.Util.isArray(r)){var a=n.parseSig(r);o=a.r;s=a.s}else if("object"===typeof r&&r.r&&r.s){o=r.r;s=r.s}else{throw"Invalid value for signature"}var u;if(i instanceof ECPointFp){u=i}else if(Bitcoin.Util.isArray(i)){u=ECPointFp.decodeFrom(t.getCurve(),i)}else{throw"Invalid format for pubkey value, must be byte array or ECPointFp"}var h=BigInteger.fromByteArrayUnsigned(e);return n.verifyRaw(h,o,s,u)},verifyRaw:function(e,r,i,n){var o=t.getN();var s=t.getG();if(r.compareTo(BigInteger.ONE)<0||r.compareTo(o)>=0)return false;if(i.compareTo(BigInteger.ONE)<0||i.compareTo(o)>=0)return false;var a=i.modInverse(o);var u=e.multiply(a).mod(o);var h=r.multiply(a).mod(o);var p=s.multiply(u).add(n.multiply(h));var c=p.getX().toBigInteger().mod(o);return c.equals(r)},serializeSig:function(t,e){var r=t.toByteArraySigned();var i=e.toByteArraySigned();var n=[];n.push(2);n.push(r.length);n=n.concat(r);n.push(2);n.push(i.length);n=n.concat(i);n.unshift(n.length);n.unshift(48);return n},parseSig:function(t){var e;if(t[0]!=48)throw new Error("Signature not a valid DERSequence");e=2;if(t[e]!=2)throw new Error("First element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);e+=2+t[e+1];if(t[e]!=2)throw new Error("Second element in signature must be a DERInteger");var i=t.slice(e+2,e+2+t[e+1]);e+=2+t[e+1];var n=BigInteger.fromByteArrayUnsigned(r);var o=BigInteger.fromByteArrayUnsigned(i);return{r:n,s:o}},parseSigCompact:function(e){if(e.length!==65){throw"Signature has the wrong length"}var r=e[0]-27;if(r<0||r>7){throw"Invalid signature type"}var i=t.getN();var n=BigInteger.fromByteArrayUnsigned(e.slice(1,33)).mod(i);var o=BigInteger.fromByteArrayUnsigned(e.slice(33,65)).mod(i);return{r:n,s:o,i:r}},recoverPubKey:function(e,o,s,a){a=a&3;var u=a&1;var h=a>>1;var p=t.getN();var c=t.getG();var f=t.getCurve();var l=f.getQ();var v=f.getA().toBigInteger();var g=f.getB().toBigInteger();if(!r){r=l.add(BigInteger.ONE).divide(BigInteger.valueOf(4))}var d=h?e.add(p):e;var y=d.multiply(d).multiply(d).add(v.multiply(d)).add(g).mod(l);var F=y.modPow(r,l);var B=F.isEven()?a%2:(a+1)%2;var m=(F.isEven()?!u:u)?F:l.subtract(F);var b=new ECPointFp(f,f.fromBigInteger(d),f.fromBigInteger(m));b.validate();var w=BigInteger.fromByteArrayUnsigned(s);var I=BigInteger.ZERO.subtract(w).mod(p);var E=e.modInverse(p);var T=i(b,o,c,I).multiply(E);T.validate();if(!n.verifyRaw(w,e,o,T)){throw"Pubkey recovery unsuccessful"}var C=new Bitcoin.ECKey;C.setPub(T.getEncoded());return C},calcPubkeyRecoveryParam:function(t,e,r,i){for(var n=0;n<4;n++){try{var o=Bitcoin.ECDSA.recoverPubKey(e,r,i,n);if(o.getBitcoinAddress().toString()==t){return n}}catch(s){}}throw"Unable to find valid recovery factor"}};return n}();Bitcoin.ECKey=function(){var t=Bitcoin.ECDSA;var e=getSECCurveByName("secp256k1");var r=new SecureRandom;var i=function(r){if(!r){var n=e.getN();this.priv=t.getBigRandom(n)}else if(r instanceof BigInteger){this.priv=r}else if(Bitcoin.Util.isArray(r)){this.priv=BigInteger.fromByteArrayUnsigned(r)}else if("string"==typeof r){var o=null;if(i.isWalletImportFormat(r)){o=i.decodeWalletImportFormat(r)}else if(i.isCompressedWalletImportFormat(r)){o=i.decodeCompressedWalletImportFormat(r);this.compressed=true}else if(i.isMiniFormat(r)){o=Crypto.SHA256(r,{asBytes:true})}else if(i.isHexFormat(r)){o=Crypto.util.hexToBytes(r)}else if(i.isBase64Format(r)){o=Crypto.util.base64ToBytes(r)}if(o==null||o.length!=32){this.priv=null}else{this.priv=BigInteger.fromByteArrayUnsigned(o)}}this.compressed=this.compressed==undefined?!!i.compressByDefault:this.compressed};i.privateKeyPrefix=128;i.compressByDefault=false;i.prototype.setCompressed=function(t){this.compressed=!!t;if(this.pubPoint)this.pubPoint.compressed=this.compressed;return this};i.prototype.getPub=function(){if(this.compressed){if(this.pubComp)return this.pubComp;return this.pubComp=this.getPubPoint().getEncoded(1)}else{if(this.pubUncomp)return this.pubUncomp;return this.pubUncomp=this.getPubPoint().getEncoded(0)}};i.prototype.getPubPoint=function(){if(!this.pubPoint){this.pubPoint=e.getG().multiply(this.priv);this.pubPoint.compressed=this.compressed}return this.pubPoint};i.prototype.getPubKeyHex=function(){if(this.compressed){if(this.pubKeyHexComp)return this.pubKeyHexComp;return this.pubKeyHexComp=Crypto.util.bytesToHex(this.getPub()).toString().toUpperCase()}else{if(this.pubKeyHexUncomp)return this.pubKeyHexUncomp;return this.pubKeyHexUncomp=Crypto.util.bytesToHex(this.getPub()).toString().toUpperCase()}};i.prototype.getPubKeyHash=function(){if(this.compressed){if(this.pubKeyHashComp)return this.pubKeyHashComp;return this.pubKeyHashComp=Bitcoin.Util.sha256ripe160(this.getPub())}else{if(this.pubKeyHashUncomp)return this.pubKeyHashUncomp;return this.pubKeyHashUncomp=Bitcoin.Util.sha256ripe160(this.getPub())}};i.prototype.getBitcoinAddress=function(){var t=this.getPubKeyHash();var e=new Bitcoin.Address(t);return e};i.createPubKeyFromChain=function(t,r){if(!Bitcoin.Util.isArray(r)){throw"chaincode must be a byte array"}var i=Crypto.SHA256(Crypto.SHA256(t,{asBytes:true}),{asBytes:true});for(var n=0;n<32;n++)i[n]^=r[n];var o=BigInteger.fromByteArrayUnsigned(i);var s=ECPointFp.decodeFrom(e.getCurve(),t).multiply(o);var a=s.getEncoded();return a};i.createECKeyFromChain=function(t,r){if(!Bitcoin.Util.isArray(r)){throw"chaincode must be a byte array"}var n=new i(t);var t=n.priv;var o=n.getPub();var s=Crypto.SHA256(Crypto.SHA256(o,{asBytes:true}),{asBytes:true});for(var a=0;a<32;a++)s[a]^=r[a];var u=BigInteger.fromByteArrayUnsigned(s);var h=BigInteger.fromByteArrayUnsigned(t);var p=e.getN();var c=u.multiply(h).mod(p);var f=e.getG().multiply(c);var l=c?c.toByteArrayUnsigned():[];return new i(l)};i.prototype.setPub=function(t){if(Bitcoin.Util.isArray(t)){t=Crypto.util.bytesToHex(t).toString().toUpperCase()}var r=e.getCurve().decodePointHex(t);this.setCompressed(r.compressed);this.pubPoint=r;return this};i.prototype.getWalletImportFormat=function(){var t=this.getPrivateKeyByteArray();t.unshift(i.privateKeyPrefix);if(this.compressed)t.push(1);var e=Bitcoin.Util.dsha256(t);t=t.concat(e.slice(0,4));var r=Bitcoin.Base58.encode(t);return r};i.prototype.getEncryptedFormat=function(t){return Bitcoin.BIP38.encode(this,t)};i.prototype.getHexFormat=function(){return Crypto.util.bytesToHex(this.getPrivateKeyByteArray()).toString().toUpperCase()};i.prototype.getBase64Format=function(){return Crypto.util.bytesToBase64(this.getPrivateKeyByteArray())};i.prototype.getPrivateKeyByteArray=function(){var t=this.priv.toByteArrayUnsigned();while(t.length<32)t.unshift(0);return t};i.prototype.toString=function(t){t=t||"";if(t.toString().toLowerCase()=="base64"||t.toString().toLowerCase()=="b64"){return this.getBase64Format()}else if(t.toString().toLowerCase()=="wif"){return this.getWalletImportFormat()}else{return this.getHexFormat()}};i.prototype.sign=function(e){return t.sign(e,this.priv)};i.prototype.verify=function(e,r){return t.verify(e,r,this.getPubPoint())};i.decodeWalletImportFormat=function(t){var e=Bitcoin.Base58.decode(t);var r=e.slice(0,33);var n=Bitcoin.Util.dsha256(r);if(n[0]!=e[33]||n[1]!=e[34]||n[2]!=e[35]||n[3]!=e[36]){throw"Checksum validation failed!"}var o=r.shift();if(o!=i.privateKeyPrefix){throw"Version "+o+" not supported!"}return r};i.decodeCompressedWalletImportFormat=function(t){var e=Bitcoin.Base58.decode(t);var r=e.slice(0,34);var n=Bitcoin.Util.dsha256(r);if(n[0]!=e[34]||n[1]!=e[35]||n[2]!=e[36]||n[3]!=e[37]){throw"Checksum validation failed!"}var o=r.shift();if(o!=i.privateKeyPrefix){throw"Version "+o+" not supported!"}r.pop();return r};i.decodeEncryptedFormat=function(t,e){return Bitcoin.BIP38.decode(t,e)};i.isHexFormat=function(t){t=t.toString();return/^[A-Fa-f0-9]{64}$/.test(t)};i.isWalletImportFormat=function(t){t=t.toString();return i.privateKeyPrefix==128?/^5[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{50}$/.test(t):/^9[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{50}$/.test(t)};i.isCompressedWalletImportFormat=function(t){t=t.toString();return i.privateKeyPrefix==i.privateKeyPrefix?/^[LK][123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{51}$/.test(t):/^c[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{51}$/.test(t)};i.isBase64Format=function(t){t=t.toString();return/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789=+\/]{44}$/.test(t)};i.isMiniFormat=function(t){t=t.toString();var e=/^S[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{21}$/.test(t);var r=/^S[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{25}$/.test(t);var i=/^S[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{29}$/.test(t);var n=Crypto.SHA256(t+"?",{asBytes:true});return(n[0]===0||n[0]===1)&&(e||r||i)};i.isBIP38Format=function(t){return Bitcoin.BIP38.isBIP38Format(t)};return i}();(function(){var t=Bitcoin.Opcode=function(t){this.code=t};t.prototype.toString=function(){return t.reverseMap[this.code]};t.map={OP_0:0,OP_FALSE:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_TRUE:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.reverseMap=[];for(var e in t.map){t.reverseMap[t.map[e]]=e}})();(function(){var t=Bitcoin.Opcode.map;var e=Bitcoin.Script=function(t){if(!t){this.buffer=[]}else if("string"==typeof t){this.buffer=Crypto.util.base64ToBytes(t)}else if(Bitcoin.Util.isArray(t)){this.buffer=t}else if(t instanceof e){this.buffer=t.buffer}else{throw new Error("Invalid script")}this.parse()};e.prototype.parse=function(){var e=this;this.chunks=[];var r=0;function i(t){e.chunks.push(e.buffer.slice(r,r+t));r+=t}while(r<this.buffer.length){var n=this.buffer[r++];if(n>=240){n=n<<8|this.buffer[r++]}var o;if(n>0&&n<t.OP_PUSHDATA1){i(n)}else if(n==t.OP_PUSHDATA1){o=this.buffer[r++];i(o)}else if(n==t.OP_PUSHDATA2){o=this.buffer[r++]<<8|this.buffer[r++];i(o)}else if(n==t.OP_PUSHDATA4){o=this.buffer[r++]<<24|this.buffer[r++]<<16|this.buffer[r++]<<8|this.buffer[r++];i(o)}else{this.chunks.push(n)}}};e.prototype.getOutType=function(){if(this.chunks[this.chunks.length-1]==t.OP_CHECKMULTISIG&&this.chunks[this.chunks.length-2]<=t.OP_1+2){return"Multisig"}else if(this.chunks.length==5&&this.chunks[0]==t.OP_DUP&&this.chunks[1]==t.OP_HASH160&&this.chunks[3]==t.OP_EQUALVERIFY&&this.chunks[4]==t.OP_CHECKSIG){return"Address"}else if(this.chunks.length==3&&this.chunks[0]==t.OP_HASH160&&this.chunks[2]==t.OP_EQUAL){return"P2SH"}else if(this.chunks.length==2&&this.chunks[1]==t.OP_CHECKSIG){return"Pubkey"}else{return"Strange"}};e.prototype.simpleOutHash=function(){switch(this.getOutType()){case"Address":return this.chunks[2];case"Pubkey":return Bitcoin.Util.sha256ripe160(this.chunks[0]);case"P2SH":return this.chunks[1];default:throw new Error("Encountered non-standard scriptPubKey")}};e.prototype.simpleOutPubKeyHash=e.prototype.simpleOutHash;e.prototype.getInType=function(){if(this.chunks.length==1&&Bitcoin.Util.isArray(this.chunks[0])){return"Pubkey"}else if(this.chunks.length==2&&Bitcoin.Util.isArray(this.chunks[0])&&Bitcoin.Util.isArray(this.chunks[1])){return"Address"}else{return"Strange"}};e.prototype.simpleInPubKey=function(){switch(this.getInType()){case"Address":return this.chunks[1];case"Pubkey":throw new Error("Script does not contain pubkey.");default:throw new Error("Encountered non-standard scriptSig")}};e.prototype.simpleInHash=function(){return Bitcoin.Util.sha256ripe160(this.simpleInPubKey())};e.prototype.simpleInPubKeyHash=e.prototype.simpleInHash;e.prototype.writeOp=function(t){this.buffer.push(t);this.chunks.push(t)};e.prototype.writeBytes=function(e){if(e.length<t.OP_PUSHDATA1){this.buffer.push(e.length)}else if(e.length<=255){this.buffer.push(t.OP_PUSHDATA1);this.buffer.push(e.length)}else if(e.length<=65535){this.buffer.push(t.OP_PUSHDATA2);this.buffer.push(e.length&255);this.buffer.push(e.length>>>8&255)}else{this.buffer.push(t.OP_PUSHDATA4);this.buffer.push(e.length&255);this.buffer.push(e.length>>>8&255);this.buffer.push(e.length>>>16&255);this.buffer.push(e.length>>>24&255)}this.buffer=this.buffer.concat(e);this.chunks.push(e)};e.createOutputScript=function(e){var r=new Bitcoin.Script;if(e.version==Bitcoin.Address.pubKeyHashVersion){r.writeOp(t.OP_DUP);r.writeOp(t.OP_HASH160);r.writeBytes(e.hash);r.writeOp(t.OP_EQUALVERIFY);r.writeOp(t.OP_CHECKSIG)}else if(e.version==Bitcoin.Address.p2shVersion){r.writeOp(t.OP_HASH160);r.writeBytes(e.hash);r.writeOp(t.OP_EQUAL)}else{throw"Unknown address version"}return r};e.prototype.extractAddresses=function(t){switch(this.getOutType()){case"Address":t.push(new Bitcoin.Address(this.chunks[2]));return 1;case"Pubkey":t.push(new Bitcoin.Address(Bitcoin.Util.sha256ripe160(this.chunks[0])));return 1;case"P2SH":t.push(new Bitcoin.Address(this.chunks[1],Bitcoin.Address.p2shVersion));return 1;case"Multisig":var e=[];var r=this.extractMultiSigPubKeys(e);for(var i=0;i<e.length;++i){t.push(new Bitcoin.Address(Util.sha256ripe160(e[i])))}return r;default:throw new Error("Encountered non-standard scriptPubKey")}};e.prototype.extractMultiSigPubKeys=function(e){if(this.chunks.length==0||this.chunks[this.chunks.length-1]!=t.OP_CHECKMULTISIG||this.chunks[this.chunks.length-2]>t.OP_1+2){throw"not a multisig script"}for(var r=1;r<this.chunks.length-2;++r){e.push(this.chunks[r])}return this.chunks[4]-t.OP_1+1};e.createMultiSigScript=function(e,r){var i=new Bitcoin.Script;i.writeOp(t.OP_1+e-1);for(var n=0;n<r.length;++n){i.writeBytes(r[n])}i.writeOp(t.OP_1+r.length-1);i.writeOp(t.OP_CHECKMULTISIG);return i};e.createInputScript=function(t,r){var i=new e;i.writeBytes(t);i.writeBytes(r);return i};e.prototype.clone=function(){return new e(this.buffer)}})();(function(){var t=Bitcoin.Script;var e=Bitcoin.Transaction=function(t){this.version=1;this.lock_time=0;this.ins=[];this.outs=[];this.timestamp=null;this.block=null;if(t){if(t.hash)this.hash=t.hash;if(t.version)this.version=t.version;if(t.lock_time)this.lock_time=t.lock_time;if(t.ins&&t.ins.length){for(var e=0;e<t.ins.length;e++){this.addInput(new a(t.ins[e]))}}if(t.outs&&t.outs.length){for(var e=0;e<t.outs.length;e++){this.addOutput(new u(t.outs[e]))}}if(t.timestamp)this.timestamp=t.timestamp;if(t.block)this.block=t.block}};e.objectify=function(t){var r=[];for(var i=0;i<t.length;i++){r.push(new e(t[i]))}return r};e.prototype.addInput=function(t,e){if(arguments[0]instanceof a){this.ins.push(arguments[0])}else{this.ins.push(new a({outpoint:{hash:t.hash,index:e},script:new Bitcoin.Script,sequence:4294967295}))}};e.prototype.clearInputs=function(t){this.ins=[]};e.prototype.serialize=function(){var t=[];t=t.concat(Crypto.util.wordsToBytes([parseInt(this.version)]).reverse());t=t.concat(Bitcoin.Util.numToVarInt(this.ins.length));for(var e=0;e<this.ins.length;e++){var r=this.ins[e];t=t.concat(Crypto.util.base64ToBytes(r.outpoint.hash));t=t.concat(Crypto.util.wordsToBytes([parseInt(r.outpoint.index)]).reverse());var i=r.script.buffer;t=t.concat(Bitcoin.Util.numToVarInt(i.length));t=t.concat(i);t=t.concat(Crypto.util.wordsToBytes([parseInt(r.sequence)]).reverse())}t=t.concat(Bitcoin.Util.numToVarInt(this.outs.length));for(var e=0;e<this.outs.length;e++){var n=this.outs[e];t=t.concat(n.value);var i=n.script.buffer;t=t.concat(Bitcoin.Util.numToVarInt(i.length));t=t.concat(i)}t=t.concat(Crypto.util.wordsToBytes([parseInt(this.lock_time)]).reverse());return t};var r=171;var i=1;var n=2;var o=3;var s=80;e.prototype.hashTransactionForSignature=function(e,r,i){var a=this.clone();for(var u=0;u<a.ins.length;u++){a.ins[u].script=new t}a.ins[r].script=e;if((i&31)==n){a.outs=[];for(var u=0;u<a.ins.length;u++)if(u!=r)a.ins[u].sequence=0}else if((i&31)==o){}if(i&s){a.ins=[a.ins[r]]}var h=a.serialize();h=h.concat(Crypto.util.wordsToBytes([parseInt(i)]).reverse());var p=Crypto.SHA256(h,{asBytes:true});return Crypto.SHA256(p,{asBytes:true})};e.prototype.getHash=function(){var t=this.serialize();return Crypto.SHA256(Crypto.SHA256(t,{asBytes:true}),{asBytes:true})};e.prototype.clone=function(){var t=new e;t.version=this.version;t.lock_time=this.lock_time;for(var r=0;r<this.ins.length;r++){var i=this.ins[r].clone();t.addInput(i)}for(var r=0;r<this.outs.length;r++){var n=this.outs[r].clone();t.addOutput(n)}return t};e.prototype.analyze=function(t){if(!(t instanceof Bitcoin.Wallet))return null;
var e=true,r=true,i=null,n=null,o=null;for(var s=this.outs.length-1;s>=0;s--){var a=this.outs[s];var u=a.script.simpleOutPubKeyHash();if(!t.hasHash(u)){r=false}else{n=u}i=u}for(var s=this.ins.length-1;s>=0;s--){var h=this.ins[s];o=h.script.simpleInPubKeyHash();if(!t.hasHash(o)){e=false;break}}var p=this.calcImpact(t);var c={};c.impact=p;if(p.sign>0&&p.value.compareTo(BigInteger.ZERO)>0){c.type="recv";c.addr=new Bitcoin.Address(n)}else if(e&&r){c.type="self"}else if(e){c.type="sent";c.addr=new Bitcoin.Address(i)}else{c.type="other"}return c};e.prototype.getDescription=function(t){var e=this.analyze(t);if(!e)return"";switch(e.type){case"recv":return"Received with "+e.addr;break;case"sent":return"Payment to "+e.addr;break;case"self":return"Payment to yourself";break;case"other":default:return""}};e.prototype.getTotalOutValue=function(){var t=BigInteger.ZERO;for(var e=0;e<this.outs.length;e++){var r=this.outs[e];t=t.add(Bitcoin.Util.valueToBigInt(r.value))}return t};e.prototype.getTotalValue=e.prototype.getTotalOutValue;e.prototype.calcImpact=function(t){if(!(t instanceof Bitcoin.Wallet))return BigInteger.ZERO;var e=BigInteger.ZERO;for(var r=0;r<this.outs.length;r++){var i=this.outs[r];var n=Crypto.util.bytesToBase64(i.script.simpleOutPubKeyHash());if(t.hasHash(n)){e=e.add(Bitcoin.Util.valueToBigInt(i.value))}}var o=BigInteger.ZERO;for(var r=0;r<this.ins.length;r++){var s=this.ins[r];var n=Crypto.util.bytesToBase64(s.script.simpleInPubKeyHash());if(t.hasHash(n)){var a=t.txIndex[s.outpoint.hash];if(a){o=o.add(Bitcoin.Util.valueToBigInt(a.outs[s.outpoint.index].value))}}}if(e.compareTo(o)>=0){return{sign:1,value:e.subtract(o)}}else{return{sign:-1,value:o.subtract(e)}}};var a=Bitcoin.TransactionIn=function(e){this.outpoint=e.outpoint;if(e.script instanceof t){this.script=e.script}else{this.script=new t(e.script)}this.sequence=e.sequence};a.prototype.clone=function(){var t=new a({outpoint:{hash:this.outpoint.hash,index:this.outpoint.index},script:this.script.clone(),sequence:this.sequence});return t};var u=Bitcoin.TransactionOut=function(e){if(e.script instanceof t){this.script=e.script}else{this.script=new t(e.script)}if(Bitcoin.Util.isArray(e.value)){this.value=e.value}else if("string"==typeof e.value){var r=new BigInteger(e.value,10).toString(16);while(r.length<16)r="0"+r;this.value=Crypto.util.hexToBytes(r)}};u.prototype.clone=function(){var t=new u({script:this.script.clone(),value:this.value.slice(0)});return t};function h(t,e){if(t.length<e)return 0;var r=t.slice(0,e);var i=1;var n=0;for(var o=0;o<e;o++){var s=t.shift();n+=s*i;i*=256}return e<=4?n:r}function p(t){return h(t,1)}function c(t){return h(t,2)}function f(t){return h(t,4)}function l(t){return h(t,8)}function v(t){return t instanceof BigInteger||t>65535}function g(t,e){var r=t.slice(0,e);for(var i=0;i<e;i++)t.shift();return r}function d(t){var e=y(t);if(v(e))return[];return g(t,e)}function y(t){var e=p(t);if(e==253)return c(t);else if(e==254)return f(t);else if(e==255)return l(t);else return e}e.deserialize=function(t){var e=new Bitcoin.Transaction;var r=t.slice(0);var i=f(r);if(i!=1){return null}var n=y(r);if(v(n))return null;for(var o=0;o<n;o++){var s=g(r,32);var a=f(r);var u=d(r);var h=f(r);var p=new Bitcoin.TransactionIn({outpoint:{hash:Crypto.util.bytesToBase64(s),index:a},script:new Bitcoin.Script(u),sequence:h});e.addInput(p)}var c=y(r);if(v(c))return null;for(var o=0;o<c;o++){var F=l(r);var u=d(r);var B=new Bitcoin.TransactionOut({value:F,script:new Bitcoin.Script(u)});e.addOutput(B)}var m=f(r);e.lock_time=m;return e};e.prototype.verifySignatures=function(t){return false};e.prototype.signWithKey=function(t){var e=0;var r=t.getPubKeyHash();for(var i=0;i<this.ins.length;++i){var n=this.ins[i];var o=n.script;if(o.simpleOutHash().compare(r)){var s=1;var a=this.hashTransactionForSignature(o,i,s);var u=t.sign(a);u.push(parseInt(s,10));var h=t.getPub();var p=new Bitcoin.Script;p.writeBytes(u);p.writeBytes(h);this.ins[i].script=p;e++}}return e};e.prototype.signWithMultiSigScript=function(t,e){var r=1;var i=0;var n=new Bitcoin.Script(e);var o=n.chunks[0]-Bitcoin.Opcode.map.OP_1+1;if(o<0||o>3){throw"Can't determine required number of signatures"}var s=Bitcoin.Util.sha256ripe160(e);var a=this;this.ins.forEach(function(u,h){var p=u.script;if(p.getOutType()=="P2SH"&&p.simpleOutHash().compare(s)){var c=new Bitcoin.Script;c.writeOp(Bitcoin.Opcode.map.OP_0);for(var f=0;f<o;++f){c.writeOp(Bitcoin.Opcode.map.OP_0)}c.writeBytes(e);p=a.ins[h].script=c}if(p.chunks.length==o+2&&p.chunks[0]==Bitcoin.Opcode.map.OP_0&&p.chunks[o+1].compare(e)){var l=0;var v=a.hashTransactionForSignature(n,h,r);var c=new Bitcoin.Script;c.writeOp(Bitcoin.Opcode.map.OP_0);for(var f=1;f<1+o;++f){if(p.chunks[f]!=0){c.writeBytes(p.chunks[f])}else{var g=false;while(!g&&l<t.length){var d=t[l++];var y=d.sign(v);y.push(parseInt(r,10));var F=false;for(var B=1;B<1+o;++B){if(y.compare(p.chunks[B])){F=true;break}}if(F){continue}c.writeBytes(y);i++;g=true}if(!g){c.writeOp(Bitcoin.Opcode.map.OP_0)}}}c.writeBytes(e);a.ins[h].script=c}});return i};e.prototype.addOutput=function(t,e){if(arguments[0]instanceof Bitcoin.TransactionOut){this.outs.push(arguments[0])}else{if(e instanceof BigInteger){e=e.toByteArrayUnsigned().reverse();while(e.length<8)e.push(0)}else if(Bitcoin.Util.isArray(e)){}else if(typeof e=="number"){e=BigInteger.valueOf(e);e=e.toByteArrayUnsigned().reverse();while(e.length<8)e.push(0)}this.outs.push(new Bitcoin.TransactionOut({value:e,script:Bitcoin.Script.createOutputScript(t)}))}};e.prototype.clearOutputs=function(t){this.outs=[]}})();var TransactionDatabase=function(){this.txs=[];this.txIndex={}};EventEmitter.augment(TransactionDatabase.prototype);TransactionDatabase.prototype.addTransaction=function(t){this.addTransactionNoUpdate(t);$(this).trigger("update")};TransactionDatabase.prototype.addTransactionNoUpdate=function(t){if(this.txIndex[t.hash]){return}this.txs.push(new Bitcoin.Transaction(t));this.txIndex[t.hash]=t};TransactionDatabase.prototype.removeTransaction=function(t){this.removeTransactionNoUpdate(t);$(this).trigger("update")};TransactionDatabase.prototype.removeTransactionNoUpdate=function(t){var e=this.txIndex[t];if(!e){return}for(var r=0,i=this.txs.length;r<i;r++){if(this.txs[r].hash==t){this.txs.splice(r,1);break}}delete this.txIndex[t]};TransactionDatabase.prototype.loadTransactions=function(t){for(var e=0;e<t.length;e++){this.addTransactionNoUpdate(t[e])}$(this).trigger("update")};TransactionDatabase.prototype.getTransactions=function(){return this.txs};TransactionDatabase.prototype.clear=function(){this.txs=[];this.txIndex={};$(this).trigger("update")};var MAINNET_PUBLIC=76067358;var MAINNET_PRIVATE=76066276;var TESTNET_PUBLIC=70617039;var TESTNET_PRIVATE=70615956;var BIP32=function(t){if(typeof t==="string"){var e=Bitcoin.Base58.decode(t);if(e.length!=82)throw new Exception("Not enough data");var r=e.slice(78,82);t=e.slice(0,78);var i=Crypto.SHA256(Crypto.SHA256(t,{asBytes:true}),{asBytes:true});if(i[0]!=r[0]||i[1]!=r[1]||i[2]!=r[2]||i[3]!=r[3]){throw new Exception("Invalid checksum")}}if(t!==undefined)this.init_from_bytes(t)};BIP32.prototype.init_from_bytes=function(t){if(t.length!=78)throw new Exception("not enough data");this.version=u32(t.slice(0,4));this.depth=u8(t.slice(4,5));this.parent_fingerprint=t.slice(5,9);this.child_index=u32(t.slice(9,13));this.chain_code=t.slice(13,45);var e=t.slice(45,78);if((this.version==MAINNET_PRIVATE||this.version==TESTNET_PRIVATE)&&e[0]==0){this.eckey=new Bitcoin.ECKey(e.slice(1,33));this.eckey.setCompressed(true);this.has_private_key=true}else if((this.version==MAINNET_PUBLIC||this.version==TESTNET_PUBLIC)&&(e[0]==2||e[0]==3)){this.eckey=new Bitcoin.ECKey("0");this.eckey.pubPoint=decompress_pubkey(e);this.eckey.setCompressed(true);this.has_private_key=false}else{throw new Exception("Invalid key")}this.build_extended_public_key();this.build_extended_private_key()};BIP32.prototype.build_extended_public_key=function(){this.extended_public_key=[];var t=MAINNET_PUBLIC;if(this.version==TESTNET_PUBLIC||this.version==TESTNET_PRIVATE){t=TESTNET_PUBLIC}this.extended_public_key.push(t>>24);this.extended_public_key.push(t>>16&255);this.extended_public_key.push(t>>8&255);this.extended_public_key.push(t&255);this.extended_public_key.push(this.depth);this.extended_public_key=this.extended_public_key.concat(this.parent_fingerprint);this.extended_public_key.push(this.child_index>>>24);this.extended_public_key.push(this.child_index>>>16&255);this.extended_public_key.push(this.child_index>>>8&255);this.extended_public_key.push(this.child_index&255);this.extended_public_key=this.extended_public_key.concat(this.chain_code);this.extended_public_key=this.extended_public_key.concat(this.eckey.getPub())};BIP32.prototype.extended_public_key_string=function(t){if(t===undefined||t==="base58"){var e=Crypto.SHA256(Crypto.SHA256(this.extended_public_key,{asBytes:true}),{asBytes:true});var r=e.slice(0,4);var i=this.extended_public_key.concat(r);return Bitcoin.Base58.encode(i)}else if(t==="hex"){return Crypto.util.bytesToHex(this.extended_public_key)}else{throw new Error("bad format")}};BIP32.prototype.build_extended_private_key=function(){if(!this.has_private_key)return;this.extended_private_key=[];var t=MAINNET_PRIVATE;if(this.version==TESTNET_PUBLIC||this.version==TESTNET_PRIVATE){t=TESTNET_PRIVATE}this.extended_private_key.push(t>>24);this.extended_private_key.push(t>>16&255);this.extended_private_key.push(t>>8&255);this.extended_private_key.push(t&255);this.extended_private_key.push(this.depth);this.extended_private_key=this.extended_private_key.concat(this.parent_fingerprint);this.extended_private_key.push(this.child_index>>>24);this.extended_private_key.push(this.child_index>>>16&255);this.extended_private_key.push(this.child_index>>>8&255);this.extended_private_key.push(this.child_index&255);this.extended_private_key=this.extended_private_key.concat(this.chain_code);this.extended_private_key.push(0);this.extended_private_key=this.extended_private_key.concat(this.eckey.priv.toByteArrayUnsigned())};BIP32.prototype.extended_private_key_string=function(t){if(t===undefined||t==="base58"){var e=Crypto.SHA256(Crypto.SHA256(this.extended_private_key,{asBytes:true}),{asBytes:true});var r=e.slice(0,4);var i=this.extended_private_key.concat(r);return Bitcoin.Base58.encode(i)}else if(t==="hex"){return Crypto.util.bytesToHex(this.extended_private_key)}else{throw new Error("bad format")}};BIP32.prototype.derive=function(t){var e=t.split("/");var r=this;for(var i in e){if(!e.hasOwnProperty(i))continue;var n=e[i];if(i==0){if(n!="m")throw"invalid path";continue}var o=n.length>1&&n[n.length-1]=="'";var s=parseInt(o?n.slice(0,n.length-1):n)&2147483647;if(o)s+=2147483648;r=r.derive_child(s)}return r};BIP32.prototype.derive_child=function(t){var e=[];e.push(t>>24&255);e.push(t>>16&255);e.push(t>>8&255);e.push(t&255);var r=(t&2147483648)!=0;var i=getSECCurveByName("secp256k1");if(r&&(!this.has_private_key||this.version!=MAINNET_PRIVATE&&this.version!=TESTNET_PRIVATE))throw new Error("Cannot do private key derivation without private key");var n=null;if(this.has_private_key){var o=null;if(r){o=[0].concat(this.eckey.priv.toByteArrayUnsigned()).concat(e)}else{o=this.eckey.getPub().concat(e)}var s=new jsSHA(Crypto.util.bytesToHex(o),"HEX");var a=s.getHMAC(Crypto.util.bytesToHex(this.chain_code),"HEX","SHA-512","HEX");var u=new BigInteger(a.slice(0,64),16);var h=Crypto.util.hexToBytes(a.slice(64,128));var p=i.getCurve();var c=u.add(this.eckey.priv).mod(i.getN());n=new BIP32;n.chain_code=h;n.eckey=new Bitcoin.ECKey(c.toByteArrayUnsigned());n.has_private_key=true}else{var o=this.eckey.getPub().concat(e);var s=new jsSHA(Crypto.util.bytesToHex(o),"HEX");var a=s.getHMAC(Crypto.util.bytesToHex(this.chain_code),"HEX","SHA-512","HEX");var u=new BigInteger(a.slice(0,64),16);var h=Crypto.util.hexToBytes(a.slice(64,128));var c=i.getG().multiply(u).add(this.eckey.getPubPoint());n=new BIP32;n.chain_code=h;n.eckey=new Bitcoin.ECKey("0");n.eckey.setPub(c.getEncoded(true));n.has_private_key=false}n.child_index=t;n.parent_fingerprint=this.eckey.getPubKeyHash().slice(0,4);n.version=this.version;n.depth=this.depth+1;n.eckey.setCompressed(true);n.build_extended_public_key();n.build_extended_private_key();return n};function uint(t,e){if(t.length<e)throw new Error("not enough data");var r=0;for(var i=0;i<e;i++){r*=256;r+=t[i]}return r}function u8(t){return uint(t,1)}function u16(t){return uint(t,2)}function u32(t){return uint(t,4)}function u64(t){return uint(t,8)}function decompress_pubkey(t){var e=getSECCurveByName("secp256k1");return e.getCurve().decodePointHex(Crypto.util.bytesToHex(t))}(function(){Bitcoin.setNetwork=function(t){if(t=="prod"){Bitcoin.Address.pubKeyHashVersion=0;Bitcoin.Address.p2shVersion=5;Bitcoin.ECKey.privateKeyPrefix=128}else{Bitcoin.Address.pubKeyHashVersion=111;Bitcoin.Address.p2shVersion=196;Bitcoin.ECKey.privateKeyPrefix=239}};Bitcoin.setNetwork("prod");Array.prototype.compare=function(t){if(!t)return false;if(this.length!=t.length)return false;for(var e=0;e<this.length;e++){if(this[e]instanceof Array&&t[e]instanceof Array){if(!this[e].compare(t[e]))return false}else if(this[e]!=t[e]){return false}}return true};if(typeof module=="object"){module.exports=function(t){sjcl=require("sjcl");var e=require("crypto");var r=Bitcoin.Util.hexToBytes(e.randomBytes(1024/8).toString("hex"));sjcl.random.addEntropy(r,1024,"crypto.randomBytes");Bitcoin.setNetwork(t);return Bitcoin}}})();