

<section id="widget-grid" class="ordersGrid assetSelector" data-bind="validationOptions: { insertMessages: false }"> <!-- widget grid -->
<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" data-bind="visible: !recievedMarketData()">
    <h1 class="page-title txt-color-blueDark">
      <i class="fa fa-bar-chart-o fa-fw "></i>      
      Decentralized Exchange Markets
    </h1>
  </div>

  <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" data-bind="visible: recievedMarketData()">
    <h1>
      <a id="changeMarket" class="btn btn-primary" style="vertical-align:text-bottom;">
        <span class="fa fa-arrow-left"><span>
        Markets
      </a>
    </h1>
  </div>

  <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" data-bind="visible: recievedMarketData()">
    <h1 style="text-align:center">
      <div class="pairTitle" style="" data-bind="text: dispAssetPair"></div> 
      <span class="marketPrice" data-bind="visible: currentMarketPrice, html: currentMarketPrice + ' ' + marketProgression24hDisp"></span>
    </h1>
  </div>

</div>

  <div class="row"> <!-- row -->
    
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <!-- Widget ID (each widget will need unique ID)-->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderInputSelection" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false" >
          <header>
            <span class="widget-icon"> <i class="fa fa-rocket"></i> </span>
            <h3>Select Another pair</h3>
            <div class="clearfix"></div>
          </header>
          <div> <!-- widget div-->
            <div class="widget-body min-height-0 no-padding" style="min-height:0 !important" data-bind="validationOptions: { insertMessages: false }"> <!-- widget content -->
                <div class="row" style="height:90px">
                    <section class="col col-lg-2 col-sm-2">
                      <div style="padding:10px">
                        <label for="asset1" class="control-label font-medlg">First Token</label>
                        <label class="input">
                            <input type="text" id="asset1" name="asset1" class="form-control input" type="text" placeholder="Asset name" data-bind="value: asset1" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: asset1"></span>
                      </div>
                    </section>
                    <section class="col col-lg-2 col-sm-2">
                      <div style="padding:10px">
                        <label for="asset2" class="control-label font-medlg">Second Token</label>
                        <label class="input">
                            <input type="text" id="asset2" name="asset2" class="form-control input" type="text" placeholder="Asset name" data-bind="value: asset2" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: asset2"></span>
                      </div>
                    </section>

                    <section class="col col-lg-8 col-sm-8 topPairsSelector">
                      <div style="padding:5px">
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">NOCALLABLE/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">GOOGLE/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">BING/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">FACEBOOK/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                        <a class="btn btn-default btn-xs" href="javascript:void(0);">XCP/BTC</a>
                      </div>
                    </section>

                    <div style="display:none">
                    <section data-bind="visible: asset1() == 'BTC' || asset2() == 'BTC'" class="col col-lg-3 col-sm-6">
                        <label for="minBTCFeeProvidedPct" class="control-label font-medlg">Min BTC % Fee Provided</label>
                        <label class="input">
                            <input type="text" name="minBTCFeeProvidedPct" class="form-control input" type="text" data-bind="value: minBTCFeeProvidedPct, valueUpdate: 'input'" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: minBTCFeeProvidedPct"></span>
                    </section>
                    <section data-bind="visible: asset1() == 'BTC' || asset2() == 'BTC'" class="col col-lg-3 col-sm-6">
                        <label for="maxBTCFeeRequiredPct" class="control-label font-medlg">Max BTC % Fee Required</label>
                        <label class="input">
                            <input type="text" name="maxBTCFeeRequiredPct" class="form-control input" type="text" data-bind="value: maxBTCFeeRequiredPct, valueUpdate: 'input'" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: maxBTCFeeRequiredPct"></span>
                    </section>
                    </div>

                </div>
            </div>
         </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->


  <div data-bind="fadeVisibleInOnly: !recievedMarketData() && assetPairMarketInfo().length > 0" class="row"> <!-- row -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-assetPairMarketInfo" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-chain"></i> </span>
            <h3>Top Pairs</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="widget-body-toolbar">
                </div>
                <table id="assetPairMarketInfo" class="table table-striped table-hover datatable_basic">
                    <thead>
                        <tr>
                            <th>Market</th>
                            <th>Lowest Ask</th>
                            <th>Highest Bid</th>
                            <th>Order Depth</th>
                            <th>24h Order Vol</th>
                            <th>24h % Change</th>
                            <th>24hr Vol (XCP)</th>
                            <th>24hr Vol (BTC)</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: assetPairMarketInfo">
                        <tr data-bind="click: $parent.selectTopPair">
                            <td data-bind="text: MARKET"></td>
                            <td>
                                <span data-bind="text: LOWEST_ASK"></span>
                                <span data-bind="text: MARKET, visible: LOWEST_ASK"></span>
                            </td>
                            <td>
                                <span data-bind="text: HIGHEST_BID"></span>
                                <span data-bind="text: MARKET, visible: HIGHEST_BID"></span>
                            </td> 
                            <td data-bind="text: ORDER_DEPTH"></td>
                            <td data-bind="text: ORDER_VOL_24H"></td>
                            <td data-bind="text: PCT_CHANGE_24H, class: PCT_CHANGE_24H_CSS_CLASS"></td>
                            <td data-bind="text: XCP_VOL_24H"></td>
                            <td data-bind="text: BTC_VOL_24H"></td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->
  
  
  <div class="alert alert-info font-medlg" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() == 0">
      <i class="fa-fw fa fa-times"></i>&nbsp;No market price data exists for this pair yet (more trade data is required to construct price charts).
  </div>  

  <div class="row" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-priceCharts" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false"
       data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
        <header>
            <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
            <h3>Price History for <span data-bind="text: dispAssetPair"></span></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="row">
                    <div class="col-md-12">
                        <div id="priceHistory" class="buySellPriceHistory"></div>
                    </div>
                </div>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->

  
  <div class="row">

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3 data-bind="text: 'Buy ' + baseAsset"></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding buyForm"> <!-- widget content -->

                <table class="table buySellForm">
                  <tbody>
                      <tr>
                        <td>Address</td>
                        <td colspan="2">
                          <select id="buyFromAddress" data-bind="options: availableAddressesForBuy, optionsValue: 'ADDRESS', optionsText: 'SELECT_LABEL', select2: {  minimumResultsForSearch: 10, escapeMarkup: 'direct' }, value: selectedAddressForBuy" style="width:250px"></select>
                        </td>
                      </tr>
                      <tr class="bold">
                        <td>Your balance</td>
                        <td data-bind="text: availableBalanceForBuy, click: setMaxBuyAmount" style="cursor:pointer" class="number"></td> 
                        <td data-bind="text: quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Lowest ask price</td>
                        <td data-bind="text:lowestAskPrice" style="width:270px" class="number"></td> 
                        <td data-bind="text: quoteAsset + '/' + baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Obtainable</td>
                        <td data-bind="text: obtainableForBuy" class="number"></td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Price</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: buyPrice, hasFocus: buyPriceHasFocus, valueUpdate: 'input'"/>
                        </td> 
                        <td data-bind="text: quoteAsset + '/' + baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Amount</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: buyAmount, hasFocus: buyAmountHasFocus, valueUpdate: 'input'"/>
                        </td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Total</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: buyTotal, hasFocus: buyTotalHasFocus, valueUpdate: 'input'"/>
                          <span class="invalid text-danger" data-bind="validationMessage: buyTotal"></span>
                        </td> 
                        <td data-bind="text: quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Fee</td>
                        <td class="number" data-bind="text: buyFee"></td> 
                        <td>BTC</td>
                      </tr>
                      <tr>
                        <td colspan="3" style="text-align:center">
                          <a id="buyButton" class="btn btn-default btn-lg" data-bind="click: buy">Buy (<span data-bind="text: quoteAsset + '→' + baseAsset"></span>)</a>
                        </td>
                      </tr>
                  </tbody>
                </table>

            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3 data-bind="text: 'Sell ' + baseAsset"></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding sellForm"> <!-- widget content -->

                <table class="table buySellForm">
                  <tbody>
                      <tr>
                        <td>Address</td>
                        <td colspan="2">
                          <select id="sellFromAddress" data-bind="options: availableAddressesForSell, optionsValue: 'ADDRESS', optionsText: 'SELECT_LABEL', select2: {  minimumResultsForSearch: 10, escapeMarkup: 'direct' }, value: selectedAddressForSell" style="width:250px"></select>
                        </td>
                      </tr>
                      <tr class="bold">
                        <td>Your balance</td>
                        <td data-bind="text: availableBalanceForSell, click: setMaxSellAmount" style="cursor:pointer" class="number"></td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Highest bid price</td>
                        <td data-bind="text:highestBidPrice" style="width:270px" class="number"></td> 
                        <td data-bind="text: quoteAsset + '/' + baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Obtainable</td>
                        <td data-bind="text: obtainableForSell" class="number"></td> 
                        <td data-bind="text: quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Price</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: sellPrice, hasFocus: sellPriceHasFocus, valueUpdate: 'input'"/>
                        </td> 
                        <td data-bind="text: quoteAsset + '/' + baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Amount</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: sellAmount, hasFocus: sellAmountHasFocus, valueUpdate: 'input'"/>
                          <span class="invalid text-danger" data-bind="validationMessage: sellAmount"></span>
                        </td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Total</td>
                        <td>
                          <input type="text" class="form-control input-sm number" type="text" data-bind="value: sellTotal, hasFocus: sellTotalHasFocus, valueUpdate: 'input'"/>
                        </td> 
                        <td data-bind="text: quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Fee</td>
                        <td class="number" data-bind="text: sellFee"></td> 
                        <td>BTC</td>
                      </tr>
                      <tr>
                        <td colspan="3" style="text-align:center">
                          <a id="sellButton" class="btn btn-default btn-lg" data-bind="click: sell">Sell (<span data-bind="text:baseAsset + '→' + quoteAsset"></span>)</a>
                        </td>
                      </tr>
                  </tbody>
                </table>
            
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->  


  
  <div class="row">

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3>Sell orders</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
   
                <table class="orderBook table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Price [<span data-bind="text: quoteAsset + '/' + baseAsset"></span>]</th>
                            <th>Amount [<span data-bind="text: baseAsset"></span>] (Count)</th>
                            <th>Total [<span data-bind="text: quoteAsset"></span>]</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: askBook"> <!-- ascending order -->
                        <tr data-bind="click: $parent.selectSellOrder">
                            <td data-bind="text: UNIT_PRICE"></td>
                            <td data-bind="text: QTY_AND_COUNT"></td> <!-- quantity (count) -->
                            <td data-bind="text: TOTAL"></td>
                        </tr>
                    </tbody>
                </table>
            
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3>Buy orders</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->

                <table class="orderBook table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Price [<span data-bind="text: quoteAsset + '/' + baseAsset"></span>]</th>
                            <th>Quantity [<span data-bind="text: baseAsset"></span>] (Count)</th>
                            <th>Total [<span data-bind="text: quoteAsset"></span>]</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: bidBook"> <!-- descending order -->
                        <tr data-bind="click: $parent.selectBuyOrder">
                            <td data-bind="text: UNIT_PRICE"></td>
                            <td data-bind="text: QTY_AND_COUNT"></td> <!-- quantity (count) -->
                            <td data-bind="text: TOTAL"></td>
                        </tr>
                    </tbody>
                </table>

            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->  

  <div class="row" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && tradeHistory().length > 0">
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-tradeHistory" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-grid="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-circle"></i> </span>
            <h3>Completed Trades for <span data-bind="text: dispAssetPair"></span></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="widget-body-toolbar">
                </div>
                <table id="tradeHistory" class="table table-striped table-hover datatable_tabletools">
                    <thead>
                        <tr>
                            <th>Block</th>
                            <th>Block Time</th>
                            <th>Quantity <span data-bind="text: baseAsset"></span></th>
                            <th>Quantity <span data-bind="text: quoteAsset"></span></th>
                            <th>Unit Price</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: tradeHistory">
                        <tr>
                            <td data-bind="html: BLOCK_INDEX"></td>
                            <td data-bind="text: BLOCK_TIME"></td>
                            <td data-bind="text: QUANTITY_BASE"></td>
                            <td data-bind="text: QUANTITY_QUOTE"></td>
                            <td data-bind="text: UNIT_PRICE"></td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->
</section>
