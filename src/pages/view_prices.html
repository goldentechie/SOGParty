

<section id="widget-grid" class="ordersGrid assetSelector"> <!-- widget grid -->
<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

    <h1 class="page-title txt-color-blueDark" data-bind="visible: !recievedMarketData()">
      <i class="fa fa-bar-chart-o fa-fw "></i>      
      Decentralized Exchange
    </h1>

    <h1 class="page-title txt-color-blueDark" data-bind="visible: recievedMarketData()">
      <i class="fa fa-bar-chart-o fa-fw "></i>         
      <span style="font-size:inherit;margin-right:50px" data-bind="text: dispAssetPair"></span> 
      <span class="marketPrice" data-bind="visible: currentMarketPrice, text: currentMarketPrice"></span>
      <a id="changeMarket" class="btn btn-primary" style="vertical-align:text-bottom;">Change Market</a>
    </h1>

  </div>
</div>
  <div data-bind="fadeVisibleInOnly: !recievedMarketData() && assetPairMarketInfo().length > 0" class="row"> <!-- row -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-assetPairMarketInfo" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-chain"></i> </span>
            <h3>Top Pairs</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="widget-body-toolbar">
                </div>
                <table id="assetPairMarketInfo" class="table table-striped table-hover datatable_basic">
                    <thead>
                        <tr>
                            <th>Market</th>
                            <th>Lowest Ask</th>
                            <th>Highest Bid</th>
                            <th>Order Depth</th>
                            <th>24h Order Vol</th>
                            <th>24h % Change</th>
                            <th>24hr Vol (XCP)</th>
                            <th>24hr Vol (BTC)</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: assetPairMarketInfo">
                        <tr data-bind="click: $parent.selectTopPair">
                            <td data-bind="text: MARKET"></td>
                            <td>
                                <span data-bind="text: LOWEST_ASK"></span>
                                <span data-bind="text: MARKET, visible: LOWEST_ASK"></span>
                            </td>
                            <td>
                                <span data-bind="text: HIGHEST_BID"></span>
                                <span data-bind="text: MARKET, visible: HIGHEST_BID"></span>
                            </td> 
                            <td data-bind="text: ORDER_DEPTH"></td>
                            <td data-bind="text: ORDER_VOL_24H"></td>
                            <td data-bind="text: PCT_CHANGE_24H, class: PCT_CHANGE_24H_CSS_CLASS"></td>
                            <td data-bind="text: XCP_VOL_24H"></td>
                            <td data-bind="text: BTC_VOL_24H"></td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->
  
  <div class="row" data-bind="fadeVisibleInOnly: !recievedMarketData()"> <!-- row -->
    
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <!-- Widget ID (each widget will need unique ID)-->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderInputSelection" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false" >
          <header>
            <span class="widget-icon"> <i class="fa fa-rocket"></i> </span>
            <h3>Select Another pair</h3>
            <div class="clearfix"></div>
          </header>
          <div> <!-- widget div-->
            <div class="widget-body min-height-0" style="min-height:0 !important" data-bind="validationOptions: { insertMessages: false }"> <!-- widget content -->
                <div class="row">
                    <section class="col col-lg-2 col-sm-4">
                        <label for="asset1" class="control-label font-medlg">First Token</label>
                        <label class="input">
                            <input type="text" id="asset1" name="asset1" class="form-control input" type="text" placeholder="Asset name" data-bind="value: asset1" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: asset1"></span>
                    </section>
                    <section class="col col-lg-2 col-sm-4">
                        <label for="asset2" class="control-label font-medlg">Second Token</label>
                        <label class="input">
                            <input type="text" id="asset2" name="asset2" class="form-control input" type="text" placeholder="Asset name" data-bind="value: asset2" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: asset2"></span>
                    </section>
                    <section data-bind="visible: asset1() == 'BTC' || asset2() == 'BTC'" class="col col-lg-3 col-sm-6">
                        <label for="minBTCFeeProvidedPct" class="control-label font-medlg">Min BTC % Fee Provided</label>
                        <label class="input">
                            <input type="text" name="minBTCFeeProvidedPct" class="form-control input" type="text" data-bind="value: minBTCFeeProvidedPct, valueUpdate: 'input'" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: minBTCFeeProvidedPct"></span>
                    </section>
                    <section data-bind="visible: asset1() == 'BTC' || asset2() == 'BTC'" class="col col-lg-3 col-sm-6">
                        <label for="maxBTCFeeRequiredPct" class="control-label font-medlg">Max BTC % Fee Required</label>
                        <label class="input">
                            <input type="text" name="maxBTCFeeRequiredPct" class="form-control input" type="text" data-bind="value: maxBTCFeeRequiredPct, valueUpdate: 'input'" />
                        </label>
                        <br/><span class="errorColor" data-bind="validationMessage: maxBTCFeeRequiredPct"></span>
                    </section>
                </div>
            </div>
         </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->
  
  <div class="alert alert-info font-medlg" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() == 0">
      <i class="fa-fw fa fa-times"></i>&nbsp;No market price data exists for this pair yet (more trade data is required to construct price charts).
  </div>  

  <div class="row" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-priceCharts" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false"  data-widget-grid="false"
       data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
        <header>
            <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
            <h3>Price History for <span data-bind="text: dispAssetPair"></span></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="row">
                    <div class="col-md-12">
                        <div id="priceHistory" class="buySellPriceHistory"></div>
                    </div>
                </div>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->

  
  <div class="row">

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3 data-bind="text: 'Buy ' + baseAsset"></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->

                

            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData()">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3 data-bind="text: 'Sell ' + baseAsset"></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->

                <table class="table buySellForm">
                  <tbody> 
                      <tr>
                        <td>Lowest ask price</td>
                        <td>0.1</td> 
                        <td data-bind="text: baseAsset + '/' + quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Address</td>
                        <td colspan="2">...</td>
                      </tr>
                      <tr class="bold">
                        <td>Your balance</td>
                        <td>0.1</td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Obtainable</td>
                        <td>0.1</td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Price</td>
                        <td>
                          <input type="text" class="form-control input-sm" type="text"/>
                        </td> 
                        <td data-bind="text: baseAsset + '/' + quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Amount</td>
                        <td>
                          <input type="text" class="form-control input-sm" type="text"/>
                        </td> 
                        <td data-bind="text: baseAsset"></td>
                      </tr>
                      <tr>
                        <td>Total</td>
                        <td>
                          <input type="text" class="form-control input-sm" type="text"/>
                        </td> 
                        <td data-bind="text: quoteAsset"></td>
                      </tr>
                      <tr>
                        <td>Fee</td>
                        <td>0.1</td> 
                        <td>BTC</td>
                      </tr>
                  </tbody>
                </table>
            
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->  


  
  <div class="row">

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3>Buy orders</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->

                <table class="orderBook table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Unit Price [<span data-bind="text: baseAsset + '/' + quoteAsset"></span>]</th>
                            <th>Quantity [<span data-bind="text: baseAsset"></span>] (Count)</th>
                            <th>Depth [<span data-bind="text: baseAsset"></span>]</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: bidBook"> <!-- descending order -->
                        <tr data-bind="click: $parent.selectBuyOrder">
                            <td data-bind="text: UNIT_PRICE"></td>
                            <td data-bind="text: QTY_AND_COUNT"></td> <!-- quantity (count) -->
                            <td data-bind="text: DEPTH"></td>
                        </tr>
                    </tbody>
                </table>

            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

    <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-orderBook" data-widget-editbutton="false" data-widget-deletebutton="false"
       data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-sortable="false" data-widget-grid="false" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && currentMarketUnitPrice() != 0">
        <header>
            <span class="widget-icon"> <i class="fa fa-sort-amount-desc"></i> </span>
            <h3>Sell orders</h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
   
                <table class="orderBook table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Unit Price [<span data-bind="text: baseAsset + '/' + quoteAsset"></span>]</th>
                            <th>Quantity [<span data-bind="text: baseAsset"></span>] (Count)</th>
                            <th>Depth [<span data-bind="text: baseAsset"></span>]</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: askBook"> <!-- ascending order -->
                        <tr data-bind="click: $parent.selectSellOrder">
                            <td data-bind="text: UNIT_PRICE"></td>
                            <td data-bind="text: QTY_AND_COUNT"></td> <!-- quantity (count) -->
                            <td data-bind="text: DEPTH"></td>
                        </tr>
                    </tbody>
                </table>
            
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->

  </div> <!-- end row -->  

  <div class="row" data-bind="fadeVisibleInOnly: validationModelBaseOrders.isValid() && recievedMarketData() && tradeHistory().length > 0">
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget defaultWidgetColor" id="wid-id-tradeHistory" data-widget-editbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-togglebutton="false" data-widget-grid="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-circle"></i> </span>
            <h3>Completed Trades for <span data-bind="text: dispAssetPair"></span></h3>
            <div class="clearfix"></div>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="widget-body-toolbar">
                </div>
                <table id="tradeHistory" class="table table-striped table-hover datatable_tabletools">
                    <thead>
                        <tr>
                            <th>Block</th>
                            <th>Block Time</th>
                            <th>Quantity <span data-bind="text: baseAsset"></span></th>
                            <th>Quantity <span data-bind="text: quoteAsset"></span></th>
                            <th>Unit Price</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: tradeHistory">
                        <tr>
                            <td data-bind="html: BLOCK_INDEX"></td>
                            <td data-bind="text: BLOCK_TIME"></td>
                            <td data-bind="text: QUANTITY_BASE"></td>
                            <td data-bind="text: QUANTITY_QUOTE"></td>
                            <td data-bind="text: UNIT_PRICE"></td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->
</section>
