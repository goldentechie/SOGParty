<div class="row">
  <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
    <h1 class="page-title txt-color-blueDark">
      <i class="fa fa-user fa-fw "></i> 
        My Account Balances 
    </h1>
  </div>
  <div class="pull-right">
      <button id="createNewAddress" type="button" class="btn btn-primary">Create New Address</button>
      <button id="sweepFunds" type="button" class="btn btn-primary">Import Funds</button>
  </div>
</div>

<section id="widget-grid" class="balancesContainer" data-bind="foreach: addresses"> <!-- widget grid -->
    <div class="row"> <!-- one row per widget in this case -->
      <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- widget START -->
        <div class="jarviswidget jarviswidget-color-blueLight" data-bind="attr: {'id': 'address-wid-' + $data.ADDRESS}" data-widget-deletebutton="false" data-widget-editbutton="false">
          <header>
            <span class="widget-icon"> <i class="fa fa-bars"></i> </span>
            <h2 class="jarviswidget-ctrls"><a href="#" data-bind="editable: label, editableOptions: { type: 'text', url: changeLabel, placement: 'bottom', title: 'Enter a new nickname for this address' }" style="text-decoration:underline"></a></h2>
            <div class="widget-toolbar">
              <div class="btn-group">
                <button class="btn dropdown-toggle btn-xs btn-primary" data-toggle="dropdown"><i class="fa fa-bars"></i> Address Actions <i class="fa fa-caret-down"></i></button>                
                <ul class="dropdown-menu pull-right">
                  <li><a data-bind="click: showQRCode" href="#">Show QR Code</a></li>
                  <li><a data-bind="click: signMessage" href="#">Sign Message</a></li>
                  <li><a data-bind="click: createAssetIn" href="#">Create Asset</a></li>
                  <li class="divider"></li><li class="dropdown-header">Sort by...</li>
                    <li><a data-bind="click: sortAssetsByName" href="#">Name</a></li>
                    <li><a data-bind="click: sortAssetsByBalance" href="#">Balance</a></li>
                  <li class="divider"></li><li class="dropdown-header">Filter by...</li>
                    <li><a data-bind="click: showAllAssets" href="#">Show All</a></li>
                    <li><a data-bind="click: showBaseAssetsOnly" href="#">Show XCP &amp; BTC Only</a></li>
                    <li><a data-bind="click: showMyAssetsOnly" href="#">Show My Assets Only</a></li>
                    <li><a data-bind="click: showOthersAssetsOnly" href="#">Show Others' Assets Only</a></li>
                </ul>
              </div>
            </div>
            <div class="widget-toolbar"><span id="" data-bind="click: prime, text: dispNumUnspentTxouts"></span></div>  
            <div class="widget-toolbar"><span id="" data-bind="attr: {'id': 'address-text-' + $data.ADDRESS}, click: function(data, event) { return selectText('address-text-' + $data.ADDRESS); }, text: ADDRESS"></span></div>  
          </header>
          <div> <!-- widget div-->
            <div class="widget-body" data-bind="attr: {'id': 'address-balances-' + $data.ADDRESS}, foreach: filteredAssets"> <!-- widget content -->
              <div class="asset-item" data-bind="css: { btc: ASSET == 'BTC', xcp: ASSET == 'XCP', myasset: isMine(), othersasset: isMine() == false }">
                <div class="btn-group" style="display: inline-block; float: right; width: 30px; height: 32px; line-height: 32px; position: relative; margin-left: 10px; "> <!-- asset level action button -->
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu">
                    <li><a data-bind="click: send" href="#">Send</a></li>
                    <li data-bind="visible: isMine() && !isLocked()"><a data-bind="click: issueAdditional" href="#">Issue Additional</a></li>
                    <li data-bind="visible: isMine()"><a data-bind="click: transfer" href="#">Transfer Ownership</a></li>
                    <li data-bind="visible: isMine() && !isLocked()"><a data-bind="click: lock" href="#">Lock Asset Ownership</a></li>
                    <li data-bind="visible: isMine()"><a data-bind="click: changeDescription" href="#">Change Asset Description</a></li>
                    <li data-bind="visible: isMine()"><a data-bind="click: payDividend" href="#">Pay Dividend</a></li>
                  </ul>
                </div>
                <h3 class="name pull-left" style="position: relative; top: -10px;" data-bind="text: ASSET"></h3>
                <div class="clearfix"></div>
                <p class="balance">
                    <span data-bind="visible: isMine()">Issued: <span data-bind="text: displayedTotalIssued"></span></span><br/>
                    Bal: <span data-bind="text: normalizedBalance() === null ? '???' : numberWithCommas(normalizedBalance())"></span></p>
                <span data-bind="visible: isLocked()" style="position:absolute;bottom:2px;right:10px"><i class="icon-append fa fa-lock"></i></span>
              </div>
            </div> <!-- end widget content body -->
          </div> <!-- end widget div -->
        </div> <!-- end widget -->
      </article> <!-- WIDGET END -->
    </div> <!-- balances container, foreach: address -->
</section> <!-- end widget grid -->
  
<!-- modal for new address -->
<div data-bind="showModal: shown" id="createNewAddressModal" class="modal fade" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="createNewAddressModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Create New Address</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Enter the description you'd like to use for this new address.<br/><br/>
            <b style='color:red'>Please NOTE that once you create a new address, you cannot delete it.</b></p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Description</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-info"></i>
                    <input name="description" data-bind="value: description, valueUpdate: 'afterkeydown'" type="text"/>
                </label>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-primary">Create New Address</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for send -->
<div data-bind="showModal: shown" id="sendModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="sendModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Send Funds</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Send <b data-bind="text: asset"></b> from your address <b data-bind="text: address"></b>
        to the address you enter below.<br/><br/>
        You have <b><span class="sellColor" data-bind="text: numberWithCommas(normalizedBalance())"></span> <span class="sellColor" data-bind="text: asset"></span></b>
        available to send from this address.
        </p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Send To</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-user"></i>
                    <input name="destAddress" data-bind="value: destAddress, valueUpdate:['afterkeydown','propertychange','input'], attr: {placeholder: 'Enter Bitcoin address'}" type="text"/>
                </label>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Send Amount</label>
            <div class="col col-10">
                <label class="input" style="display: inline-block;">
                    <i class="icon-append fa fa-share"></i>
                    <input name="quantity" data-bind="value: quantity, valueUpdate: 'afterkeydown', attr: {placeholder: 'Enter quantity'}" type="text"/>
                </label>
                <span>&nbsp;&nbsp;<span style="font-weight: bold" data-bind="text: asset"></span></span>
            </div>
          </div></section>
        <p data-bind="fadeVisibleInOnly: numberWithCommas(normalizedBalRemaining())" style="font-weight: bold">
            After sending, you will have <span class="sellColor" data-bind="text: numberWithCommas(normalizedBalRemaining())"></span>
            <span class="sellColor" data-bind="text: asset"></span> remaining at this address (minus fees).</p>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-primary">Send</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for sweep (import) -->
<div data-bind="showModal: shown" id="sweepModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="sweepModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Import (Sweep) Funds from Another Address</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Import funds by "sweeping" then from another external address you own into one of your wallet address.</p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Private Key To Import</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-lock"></i>
                    <input name="privateKey" data-bind="value: privateKey, valueUpdate:['afterkeydown','propertychange','input'], attr: {placeholder: 'Enter Bitcoin private key'}" type="text"/>
                </label>
                <div class="note">Enter the unencrypted private key that cooresponds to the address with the funds you want to move.</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Destination Address</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-lock"></i>
                    <select data-bind="options: availableAddresses, optionsText: 'SELECT_LABEL', select2: {  minimumResultsForSearch: -1, escapeMarkup: function(m) { return m; } }, value: destAddress"></select>
                </label>
                <div class="note">Select the address in your wallet that the specified assets for the private key above should be send to.</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Assets to Sweep</label>
            <div class="col col-10">
                <label class="input">
                    <select multiple data-bind="options: availableAssetsToSweep, optionsText: 'SELECT_LABEL', select2: {  minimumResultsForSearch: -1, escapeMarkup: function(m) { return m; } }, value: selectedAssetsToSweep"></select>
                </label>                    
                <div class="note">Select all of the assets whose total amounts you want to move into the destination address.</div>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-danger">Sweep</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for sign message -->
<div data-bind="showModal: shown" id="signMessageModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="signMessageModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Sign a Message</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Sign a message from address <b data-bind="text: address"></b>.</p>
        
        <form class="smart-form"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Message to Sign</label>
            <div class="col col-10">
                <label class="textarea">
                    <textarea rows="3" class="custom-scroll" data-bind="value: message, valueUpdate : 'afterkeydown'"></textarea>
                </label>
                <div class="note">Enter the message text to be signed.</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Signed Message</label>
            <div class="col col-10">
                <label class="textarea">
                    <textarea rows="3" class="custom-scroll" data-bind="value: signedMessage" readonly="readonly"></textarea>
                </label>
                <div class="note">The signed message appears above.</div>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for priming address -->
<div data-bind="showModal: shown" id="primeAddressModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="primeAddressModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">"Prime" Address <span data-bind="text: address"></span></h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">In order to be able to do things with Counterparty, your address needs to
            contain at one confirmed <a href="http://bitcoin.stackexchange.com/questions/4301/what-is-an-unspent-output" target="_blank">"unspent output"</a>.
            for each action you want to do (e.g. send, create asset, etc). This form allows you to take one larger unspent input that you may have at
            your address and split it into many smaller ones, allowing you to perform multiple Counterparty actions without
            having to wait between each one. We call this "priming" the address.</p>
        <p>You currently have <span data-bind="text: dispNumUnspentTxouts"></span> unspent outputs for address <span data-bind="text: address"></span>.
            We recommend you try to keep between 5 and 15 unspent outputs. Note that this operation won't add, remove or delete any funds.
            It simply changes how those funds are structured on the blockchain.</p>
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Create Additional</label>
            <div class="col col-10">
                <label class="textarea">
                    <input name="numNewPrimedTxouts" data-bind="value: numNewPrimedTxouts, valueUpdate:['afterkeydown','propertychange','input']" type="text"/>
                </label>
                <div class="note">The number of additional unspent outputs you want to prime the account with.</div>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-warning">Prime</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for create asset -->
<div data-bind="showModal: shown" id="createAssetModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="createAssetModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Create (Issue) an Asset</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Please note that a <b>5 XCP fee</b> will be deducted from your balance upon successful creation.</p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">For Address</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-user"></i>
                    <input name="assetAddress" data-bind="value: address" type="text" readonly="readonly"/>
                </label>
                <div class="note">The address the asset will be created on.</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Asset Name</label>
            <div class="col col-10">
                <label class="input">
                    <input name="assetName" data-bind="value: name, valueUpdate : 'afterkeydown'" type="text"/>
                </label>
                <div class="note">The asset's trading symbol (also known as the Asset ID).</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Description</label>
            <div class="col col-10">
                <label class="input">
                    <input name="assetDescription" data-bind="value: description, valueUpdate: 'afterkeydown'"/>
                </label>
                <div class="note">Optional text that provides more information on the asset.</div>
            </div>
          </div></section>
          <section><div class="row">
            <label class="label col col-2">Quantity</label>
            <div class="col col-10">
                <label class="input">
                    <input name="assetQuantity"  data-bind="value: quantity, valueUpdate: 'afterkeydown'" type="text"/>                        
                </label>
                <div class="note">How many of the units of the asset to issue (can be increased later).</div>
            </div>
          </div></section>
          <section><div class="row">
            <div class="col col-2"></div>
            <div class="col col-10">
              <label class="checkbox">
                <input name="assetDivisible" type="checkbox" data-bind="checked: divisible">
                <i></i>Divisible asset?
              </label>
              <div class="note">Divisble assets can be subdivided into decimal places.</div>
          </div></section>
          <section><div class="row">
            <div class="col col-2"></div>
            <div class="col col-10">
              <label class="checkbox">
                <input name="assetCallable" type="checkbox" data-bind="checked: callable">
                <i></i>Callable asset?
              </label>
              <div class="note">Callable assets may be called back at a specific date for a specific strike price.</div>
          </div></section>
          <section data-bind="fadeVisibleInOnly: callable"><div class="row">                
            <label class="label col col-2">Call Date</label>
            <div class="col col-10">
                <label class="input">
                    <input name="assetCallDate" type="text" data-bind="datetimepicker: callDate"/>
                </label>
                <div class="note">The date and time after which the owner of the asset may choose to call it back.</div>
            </div>
          </div></section>
          <section data-bind="fadeVisibleInOnly: callable"><div class="row">                
            <label class="label col col-2">Call Price</label>
            <div class="col col-10">
                <label class="input">
                    <input name="assetCallPrice" type="text" data-bind="value: callPrice, valueUpdate: 'afterkeydown'"/>
                </label>
                <div class="note">The price per unit that the owner of the asset may call it back for.</div>
            </div>
          </div></section>
        </fieldset></form>                    
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-primary">Create Asset</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for asset issue additional -->
<div data-bind="showModal: shown" id="issueAdditionalAssetModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="issueAdditionalAssetModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Issue Additional Asset Quantity</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">How many more quantity of this asset would you like to issue? <i>(For divisible assets, state
       the amount as a whole or floating point number, not in satoshis -- e.g. '732.45')</i><br/><br/>
       There is currently quantity <b style="color: green" data-bind="text: displayedTotalIssued"></b> of this asset issued.<br/><br/>
       <b style='color:red'>Please NOTE that this action is irreversable!</b></p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Additional Qty</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-plus"></i>
                    <input name="additionalIssue" data-bind="value: additionalIssue, valueUpdate: 'afterkeydown'" type="text"/>
                </label>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-warning">Issue Additional</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for asset transfer -->
<div data-bind="showModal: shown" id="transferAssetModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="transferAssetModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Transfer Asset</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Enter the bitcoin address you would like to perminently transfer <u>ALL</u> shares of this asset to.
            <br/><br/><b style='color:red'>Please NOTE that this action is irreversable!</b></p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Transfer To</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-share"></i>
                    <input name="destAddress" data-bind="value: destAddress, valueUpdate: ['afterkeydown','propertychange','input']" type="text"/>
                </label>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-danger">Transfer</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for asset change description -->
<div data-bind="showModal: shown" id="changeAssetDescriptionModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="changeAssetDescriptionModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Change Asset Description</h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">Enter the new description for this asset:</p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">Description</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-info"></i>
                    <input name="newDescription" data-bind="value: newDescription, valueUpdate: 'afterkeydown'" type="text"/>
                </label>
            </div>
          </div></section>
        </fieldset></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-warning">Change Description</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal for pay dividend -->
<div data-bind="showModal: shown" id="payDividendModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="payDividendModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Pay Dividend on <span data-bind="text: assetName"></span></h4>
      </div>
      <div class="modal-body no-padding">
        <p class="formIntro">How many XCP per share of this unit would you like to pay to asset holders as a dividend?
        <i>(Note that the full balance of XCP paid out must be present at this same address.)</i><br/><br/>
       <span data-bind="fadeVisible: displayedAddressXCPBalance !== null">This address has a balance of
           <b style="color: green" data-bind="text: displayedAddressXCPBalance"></b> XCP that can be paid as a dividend.<br/><br/></span>
       <b style='color:red'>Please NOTE that this action is irreversable!</b></p>
        
        <form class="smart-form" data-bind="submit: doAction"><fieldset>
          <section><div class="row">
            <label class="label col col-2">XCP per Unit</label>
            <div class="col col-10">
                <label class="input"><i class="icon-append fa fa-plus"></i>
                    <input name="qtyPerUnit" data-bind="value: qtyPerUnit, valueUpdate : 'afterkeydown'" type="text"/>
                </label>
            </div>
          </div></section>
        </fieldset></form>
        <span data-bind="fadeVisibleInOnly: qtyPerUnit() && displayedXCPBalRemainingPostPay() >= 0">
            After dividend payment this address will have a remaining balance of
            <b style="color: #a4781b" data-bind="text: displayedXCPBalRemainingPostPay"></b> XCP.<br/><br/>
        </span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
        <button type="button" data-bind="click: submitForm" class="btn btn-warning">Pay Dividend</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script type="text/javascript">
  //Bind the WALLET object to balancesGrid (this MUST go before pageSetUp on this page!)
  ko.applyBindingsWithValidation(WALLET, document.getElementsByClassName("balancesContainer")[0]);
  pageSetUp(); //init smartadmin featureset

  loadBalanceScripts();
  function loadBalanceScripts() {
    loadScript("xcp/js/components/balances.js", b_2);
    function b_2() {
        loadScript("xcp/js/components/balances_assets.js", null);
    }
  }
</script>
