<div class="row">
  <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
    <h1 class="page-title txt-color-blueDark">
      <i class="fa fa-user fa-fw "></i> 
        Account History 
    </h1>
  </div>
</div>

<section id="widget-grid"> <!-- widget grid -->
  <div class="row"> <!-- row -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <!-- Widget ID (each widget will need unique ID)-->
      <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-balHistory" data-widget-editbutton="false" data-widget-deletebutton="false">
          <header>
            <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
            <h2>Balance History</h2>
          </header>
          <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
              <div class="widget-body-toolbar">
                <form class="smart-form"><fieldset style="padding: 5px 14px 5px;">
                  <section><div class="row">
                    <label class="control-label col col-sm-2">Select Asset</label>
                    <div class="col col-sm-10">
                        <label class="select">
                        <select data-bind="options: availableAssets, value: selectedAsset, event: { change: assetChanged }">
                        </select> <i></i> </label>
                    </div>
                  </div></section>
                </fieldset></form>
              </div>
              <div id="balanceHistory"></div>
            </div> <!-- end widget content -->
          </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->
    
    
  <div class="row"> <!-- row -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <!-- NEW WIDGET START -->
      <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-txnHistory" data-widget-editbutton="false" data-widget-deletebutton="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-table"></i> </span>
            <h2>Recent Transactions for <span data-bind="text: selectedAddress"></span></h2>
        </header>
        <div> <!-- widget div-->
            <div class="widget-body no-padding"> <!-- widget content -->
                <div class="widget-body-toolbar">
                  <form class="smart-form"><fieldset style="padding: 5px 14px 25px;">
                    <section><div class="row">
                      <label class="control-label col col-sm-2">Select Address</label>
                      <div class="col col-sm-10">
                          <label class="select">
                          <select data-bind="options: availableAddresses, optionsText: 'LABEL', value: selectedAddress, event: { change: addressChanged }">
                          </select> <i></i> </label>
                      </div>
                    </div></section>
                  </fieldset></form>
                </div>
                <div id="txnHistoryLoading">
                    <div class="alert alert-info" style="text-align: center;">Loading transaction data...</div>
                </div>
                <table id="txnHistory" data-bind="fadeVisible: transactions().length > 0" class="table table-striped table-hover datatable_tabletools">
                    <thead>
                        <tr>
                            <th>Tx</th>
                            <th>Block</th>
                            <th>BlockTime</th>
                            <th>Source</th>
                            <th>TxType</th>
                            <th>Description</th>
                            <!--<th>BTCAmount</th>
                            <th>Fee</th>-->
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: transactions">
                        <tr>
                            <td><a target="_blank" data-bind="text: txIndex, attr: { href: !USE_TESTNET ? 'http://blockscan.com/tx.aspx?q=' + txIndex : null }"></a></td> <!-- link to TX at blockscan -->
                            <td><a target="_blank" data-bind="text: blockIndex, attr: { href: BLOCKEXPLORER_URL + '/blocks?blockHeight=' + blockIndex  : null }"></a></td> <!-- link to block tx at insight -->
                            <td data-bind="text: dispBlocktime()"></td> <!-- datetime formatted string -->
                            <td><a target="_blank" data-bind="text: dispSource(), attr: { href: !USE_TESTNET ? 'http://blockscan.com/address.aspx?q=' + source : null }"></a></td> <!-- link to source addr at blockscan -->
                            <td data-bind="html: dispTxType()"></td>
                            <td data-bind="html: dispDescription()"></td>
                            <!--<td data-bind="html: btcAmount"></td>
                            <td data-bind="html: fee"></td>-->
                        </tr>
                    </tbody>
                </table>
            </div> <!-- end widget content -->
        </div> <!-- end widget div -->
      </div> <!-- end widget -->
    </article> <!-- WIDGET END -->
  </div> <!-- end row -->
</section>

<script type="text/javascript">
  loadScript("xcp/js/components/history.js", null);
  pageSetUp(); //init smartadmin featureset
</script>
