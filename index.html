<!doctype html>
<html lang="en"><head>
    <meta charset="utf-8">
    <title>Counterwallet - Secure Deterministic Wallet for Counterparty</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Counterparty Wallet" name="description">
    <meta content="counterwallet" name="author">
    
    <!-- If I have seen further it is by standing on the shoulders of giants. -->
    
    <!-- Style sheets -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
    <link href="extcss/jquery.reject.css" rel="stylesheet">
    <link href="css/packaged-app.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
    <!--<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="https://raw.github.com/DataTables/Plugins/master/integration/bootstrap/3/dataTables.bootstrap.css">-->

    <link href="css/default.css" rel="stylesheet">
    <link href="css/components/logon.css" rel="stylesheet">
    <link href="css/components/asset.css" rel="stylesheet">
    
    <!-- bitcoinjs-lib: The following library is required for bitcon addresses and signing. -->
    <script src="extjs/bitcoinjs.min.js"></script> 
    <script src="extjs/bitcoinjs-tx.js"></script> 

    <!-- JQuery -->
    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="extjs/jquery.jqlog.js"></script>
    <script src="extjs/jquery.reject.js"></script>

    <!-- Bootstrap -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script src="extjs/jqBootstrapValidation.js"></script>
    <script src="extjs/bootbox.js"></script>
    
    <!-- socket.io -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    
    <!-- knockout.js -->
    <!--<script src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>-->
    <script src="http://knockoutjs.com/downloads/knockout-3.0.0.debug.js"></script>
    <script src="extjs/knockout-bootstrap.js"></script>
    <script src="extjs/knockout.x-editable.js"></script>
    
    <!--<script type="text/javascript" charset="utf8" src="//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <script src="//raw.github.com/DataTables/Plugins/master/integration/bootstrap/3/dataTables.bootstrap.js"></script>-->
    
    <!-- Other external libraries. -->
    <script src="extjs/struct.js"></script>    
    <script src="extjs/qrcode.js"></script> 
    <script src="extjs/mnemonic.js"></script> 
    <script src="extjs/electrum.js"></script> 
    
    <!-- JavaScript created specifically for Counterwallet. -->
    <script src="js/config.js"></script> 
    <script src="js/util.js"></script> 
    <script src="js/datafeed.js"></script> 
    <script src="js/counterwallet.js"></script> 
    <script src="js/components/address.js"></script> 
    <script src="js/components/asset.js"></script> 
    <script src="js/components/logon.js"></script> 
    <script src="js/components/wallet.js"></script> 
    <link href="favicon.png" rel="icon" type="image/png">
  </head>
  <body>
    <div id="wrap">
      
      <!-- Logged out page -->
      <div id="logon">
        <h1 style="font-size: 2em; text-align: center">Welcome to Your Secure Counterparty Web Wallet</h1>
        <h2 style="font-size: 1.5em; text-align: center; padding-bottom: 5px; color: #333">Trade derivatives, place bets, issue stocks or assets, and more.</h2>
        <div id="form-well" style="margin-top:40px">
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title"><b>Log Into Your Wallet</b></h3>
            </div>
            <div class="panel-body">
              <form class="form-inline" role="form">
                <input id="password" data-bind="value: enteredPassphrase, valueUpdate:'afterkeydown'" placeholder="Enter your Counterwallet 12 word passphrase." class="form-control" type="password">
                <div class="pull-right">
                  <button id="open-sesame" data-bind="click: openWallet, enable: isPassphraseValid(), css: { 'btn-primary': isPassphraseValid() }" type="button" class="btn btn-default">Open Wallet</button>
                </div>
              </form>
              <div data-bind="visible: walletGenProgressVal() > 0" class="progress progress-striped active" style="margin-top:15px;margin-bottom:0">
                <div class="progress-bar"  role="progressbar" data-bind="style: { width: walletGenProgressWidth() }">
                </div>
              </div>              
            </div>
          </div>
          <div data-bind="visible: generatedPassphrase().length == 0" style="text-align:center">
            <p style="font-size:1.7em">or&nbsp;              
            <button data-bind="click: generatePassphrase" type="button" class="btn btn-success btn-lg">Create a new wallet</button>
            </p>
          </div>
          <div data-bind="visible: generatedPassphrase()">
            <br/>
            <div class="panel panel-warning">
              <div class="panel-heading">
                <h3 class="panel-title"><b>To use Counterwallet you need a 12 word passphrase</b></h3>
              </div>
              <div class="panel-body">
                <p>We have created a passphrase for you in the box below.</p>
                <form class="form-inline" role="form">
                  <input id="generated" readonly="readonly" data-bind="value: generatedPassphrase" class="input-medium form-control" type="text">
                  <div class="pull-right">
                    <button data-bind="click: generatePassphrase, tooltip: {title: 'Click to generate another random passphrase.'}" class="btn btn-default" type="button"><i class="fa fa-repeat"></i></button>
                  </div>
                </form>
                <div class="alert alert-danger" style="margin-top:15px;">
                  <p style="font-weight:bold;text-align:center;font-size:1.3em">Write your passphrase down and keep it safe.</p>
                  <p style="font-weight:bold;text-decoration:underline;text-align:center;font-size:1.2em">
                    If you loose this passphrase, you will loose access to your wallet.
                  </p>
                  <p style="font-weight:bold;text-decoration:underline;text-align:center;font-size:1.2em">
                    If someone gets your passphrase, they can gain access to your wallet.
                  </p>
                </div>
                <p>To log into your wallet, input your passphase in the wallet login textbox above, and press the "Open Wallet" button.</p>
                </div>
              </div>
            </div>              
        </div> <!-- form-well -->
        <div id="extra-info" class="container">
          <h3 class="sales-title">Why should I use Counterwallet?</h3>
          <h4 class="sales-subtitle">We're a very secure online wallet with a goal of supporting all Counterparty functionality.</h4>
          <h4 class="sales-subtitle">Create and access your wallet with a single passphrase, with no funds stored locally or on our servers.</h4>
          <div class="row">
            <div class="col-sm-4 col-md-4">
              <h4><i class="icon-ok-sign"></i> Secure and predictable.</h4>
              <p>Counterwallet is an online <a href="https://en.bitcoin.it/wiki/Deterministic_wallet">deterministic wallet</a>. 
              Your passphrase is turned into a number which is then turned into Bitcoin Addresses. 
              </p>
              
              <p>Your passphrase is your wallet access and wallet backup.</p> 
            </div>
            <div class="col-sm-4 col-md-4">
              <h4><i class="icon-ok-sign"></i> We are a zero footprint wallet.</h4>
              <p>
                We don't store your Bitcoins locally or on our servers, only in your browser memory. 
                No trace is left on your device once you logout of your session.</p> 
              <p> 
              Theives have fewer angles of attack with Counterwallet.
              </p>
            </div>
            <div class="col-sm-4 col-md-4">
              <h4><i class="icon-ok-sign"></i> We support online or cold storage.</h4>
              <p>Need to store large sums of Bitcoins ? Counterwallet supports 
              <a href="https://en.bitcoin.it/wiki/Cold_storage">Cold Storage</a>.</p> 
              <p>  
              You can use Counterwallet online or offline on a computer you know is clean and safe.<br/> 
              <i class="icon-download"></i> 
              <a href="https://github.com/xnova/counterwallet/archive/master.zip">Download Counterwallet</a>
              </p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Logged in site -->
      <div id="site" class="container" style="display: none;">
        <!-- Navbar -->
        <div class="navbar navbar-fixed-top navbar-default nav-tabs" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand" href="#balances">Counterwallet</a>
            </div>
            <div class="navbar-collapse">
              <ul id="menubar" class="nav navbar-nav">
                <li class="active"><a href="#balances" data-toggle="tab">Balances</a></li>
                <li><a href="#send" data-toggle="tab">Send Funds</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Trading <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#trading-markets" data-toggle="tab">Markets</a></li>
                    <li><a href="#trading-buysell" data-toggle="tab">Buy/Sell</a></li>
                    <li><a href="#trading-history" data-toggle="tab">History</a></li>
                  </ul>
                </li>
                <li id="logout-menu">
                  <a id="logout" href="#">Logout</a>
                </li>
              </ul>
            </div>
          </div>
        </div> <!--Navbar-->    
        
        <!-- LOGGED IN HOME TAB (VIEW ADDRESSES/ASSETS) -->
        <div id="tabcontent" class="tab-content">
          <div class="tab-pane fade in active" id="balances">
              <!--<h4>Your Balances</h4>-->
            <div id="balancesContainer" data-bind="foreach: addresses">
                <div class="panel panel-default">
                  <div class="panel-heading clearfix">
                    <h3 class="panel-title pull-left"><a href="#" data-bind="editable: label, editableOptions: { type: 'text', url: changeLabel, placement: 'bottom', title: 'Enter a nickname for this address' }"></a></h3>
                    <div class="btn-group pull-right">
                      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Actions <span class="caret"></span></button>
                      <ul class="dropdown-menu" role="menu">
                        <li><a data-bind="click: sendFrom" href="#">Send From</a></li>
                        <li><a data-bind="click: showQRCode" href="#">Show QR Code</a></li>
                        <li><a data-bind="click: createAssetIn" href="#">Create Asset</a></li>
                        <li class="divider"></li><li class="dropdown-header">Sort by...</li>
                          <li><a data-bind="click: sortAssetsByName" href="#">Name</a></li>
                          <li><a data-bind="click: sortAssetsByBalance" href="#">Balance</a></li>
                        <li class="divider"></li><li class="dropdown-header">Filter by...</li>
                          <li><a data-bind="click: showAllAssets" href="#">Show All</a></li>
                          <li><a data-bind="click: showBaseAssetsOnly" href="#">Show XCP &amp; BTC Only</a></li>
                          <li><a data-bind="click: showMyAssetsOnly" href="#">Show My Assets Only</a></li>
                          <li><a data-bind="click: showOthersAssetsOnly" href="#">Show Others' Assets Only</a></li>
                      </ul>
                    </div>
                    <h4 class="header-address pull-right" data-bind="text: ADDRESS"></h4>
                  </div> <!-- panel header -->
                  
                  <div class="panel-body" , data-bind="attr: {'id': 'address-balances-' + $data.ADDRESS}, foreach: filteredAssets">
                    <div class="asset-item" data-bind="css: { btc: ASSET == 'BTC', xcp: ASSET == 'XCP', myasset: isMine(), othersasset: isMine() == false }">
                      <h3 class="name" data-bind="text: ASSET"></h3>
                      <p class="balance" data-bind="text: displayedBalance"></p>
                    </div>
                  </div>
                </div> <!-- panel -->
            </div> <!-- balances container, foreach: address -->
            
            <!-- modal for send asset -->
            <div data-bind="showModal: shown", id="createAssetModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="createAssetModal" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" data-bind="click: hide" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Issue an Asset</h4>
                  </div>
                  <div class="modal-body">
                    <p>Please note that a <b>5 XCP fee</b> will be deducted from your balance upon successful creation of an asset.</p>
                    <form role="form" data-bind="submit: createAsset">
                      <div class="form-group">
                        <label for="assetAddress">Issue on Address</label>
                        <input name="assetAddress" data-bind="value: address" type="text" class="form-control" readonly="readonly">
                        <p class="help-block">The address the asset will be created on.</p>
                      </div>
                      <div class="form-group">
                        <label for="assetName">Asset Name</label>
                        <input name="assetName" data-bind="value: name" type="text" class="form-control" placeholder="Enter a web link to the asset"
                               data-validation-regex-regex="[A-Z]+" minlength="4" maxlength="24" data-validation-regex-message="Must be between 4-24 uppercase letters only (A-Z)" required>
                        <p class="help-block">The asset's trading symbol (also known as the Asset ID).</p>
                      </div>
                      <div class="form-group">
                        <label for="assetLink">Descriptive Link</label>
                        <input name="assetLink" data-bind="value: url" type="url" class="form-control" placeholder="Link to info on the asset" maxlength="50">
                        <p class="help-block">An optional URL that provides more information on the asset.</p>
                      </div>
                      <div class="form-group">
                        <label for="assetQuantity">Quantity to Create</label>
                        <input name="assetQuantity"  data-bind="value: quantity" type="text" class="form-control"
                               data-validation-regex-regex="[0-9]*\.?[0-9]{0,8}" data-validation-regex-message="Must be a valid number" required/>                        
                        <p class="help-block">How many of the units of the asset to issue (can be increased later).</p>
                        <!-- todo, validation currently doesn't differenciate between divisible (FP allowed) and indivisible -->
                      <div class="checkbox">
                        <label>
                          <input name="assetDivisible" type="checkbox" data-bind="checked: divisible"> Divisible asset?
                        </label>
                        <p class="help-block">Divisble assets can be subdivided into decimal places.</p>
                      </div>
                      </div>
                    </form>                    
                  </div>
                  <div class="modal-footer">
                    <button type="button" data-bind="click: submitForm" class="btn btn-primary">Create Asset</button>
                    <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
                        
          </div> <!-- balances tab pane -->
          
          <!-- SEND FUNDS/ASSETS -->
          <div class="tab-pane fade" id="send">
            <h4>Make a Payment</h4>
            <form action="/" class="form-vertical" method="get">
              <fieldset>
                <div class="form-hide form-group">
                  <label class="control-label" for="txSec">Private Key</label> 
                  <div class="controls"> 
                    <input class="span5 form-control" id="txSec" type="text"> 
                    <span class="errormsg help-block"></span> 
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label" for="txDropAddr">Source Address</label> 
                  <div class="controls">
                    <select class="span4" id="txDropAddr"> 
                    </select>
                    <div class="input-prepend"> <span class="add-on">BTC</span><input class="span2 form-control" id="txBalance" readonly="" type="text"> 
                    </div>
                    <!--<button class="btn" id="txDropGetUnspent" title="Reload" type="button"><i class="icon-repeat"></i></button> 
                      <button class="btn" data-target="#txUnspentForm" data-toggle="collapse" id="txToggle" type="button">Edit Inputs</button>-->
                  </div>
                </div>
                <div class="txCC form-group">
                  <label class="control-label" for="txDest">Destination Address</label> 
                  <div class="controls">
                    <input id="txDest" class="span4 txDest form-control" type="text" placeholder="E.g. 1BountYypWttTvAJcMJVvSRDfX3TJ182To" autocomplete="off"> 
                    <div class="input-prepend"> 
                      <span class="add-on">BTC</span>
                      <input class="span2 form-control" id="txValue" placeholder="E.g. 0.01" type="text" autocomplete="off"> 
                    </div>
                    <span class="errormsg help-block">
                    <button class="btn input-up btn-default" style="margin-bottom: 10px" id="txAddDest" type="button">+</button> 
                    <button class="btn input-up btn-default" style="margin-bottom: 10px" id="txRemoveDest" type="button" disabled="">–</button> 
                    </span> 
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label" for="txFee">Fee (Includes Miners Fee)</label> 
                  <div class="controls">
                    <div class="input-prepend"><span class="add-on">BTC</span><input readonly="" class="span2 form-control" id="txFee" type="text" value="0.0005"></div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label" for="txFee">You can check the payment before it is sent to the network.</label> 
                  <div class="controls"> 
                    <button class="btn btn-default" disabled="" style="margin-bottom: 10px" id="txSend" type="button">Verify and Send</button>
                  </div>
                </div>
              </fieldset>
            </form>
            <div id="verifyModal" class="modal hide">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h6>Send payment of <span id="verifyAmountTitle">0.005</span> BTC from <span id="verifySource">1BountYypWttTvAJcMJVvSRDfX3TJ182</span></h6>
              </div>
              <div id="verifyBody" class="modal-body">
                <table class="table table-bordered">
                  <thead id="verifyTable">
                    <tr>
                      <th>Destination Address</th>
                      <th>Amount</th>
                    </tr>
                  </thead>
                  <tbody><tr>
                    <td><small><span class="label label-default">A fee of 0.0005 BTC will be added.</span></small></td>
                    <td><small><span><strong>0.0005</strong></span></small></td>
                  </tr>
                  </tbody><tfoot>
                    <tr>
                      <td><strong>Total</strong></td>
                      <td><strong id="verifyTotal">50.05</strong> BTC</td>
                    </tr>
                  </tfoot>
                </table>
                <p id="tx-toggle">
                  <a data-toggle="collapse" data-target="#advanced-details">Show/Hide Transaction Details (Advanced users)</a>
                </p>
                <div id="advanced-details" class="collapse">
                  <div class="form-group">
                    <label class="control-label" for="txJSON">JSON Transaction</label> 
                    <div class="controls"> 
                      <textarea class="span5" id="txJSON" rows="4"></textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label" for="txHex">Raw Transaction</label> 
                    <div class="controls"> 
                      <textarea class="span5" id="txHex" rows="4"></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn btn-default">Cancel</a>
                <button id="sendPayment" data-dismiss="modal" class="btn btn-primary">Send Payment</button>
              </div>
            </div>
          </div>
          
        </div> <!-- all tabcontent -->
      </div> <!-- logged in site -->
    </div> <!-- main wrap div -->

    <!-- FOOTER -->
    <div id="footer">
      <div class="container">
        <p><small>Counterwallet © 2013-Present, Counterparty Team -- <a href="https://github.com/xnova/counterwallet">View Source Code</a></small></p>
      </div>
    </div>
</body></html>